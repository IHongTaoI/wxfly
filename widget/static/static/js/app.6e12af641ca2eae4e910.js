webpackJsonp([24],{"+dnW":function(e,t,n){"use strict";var a=n("cUn4"),r=new(n.n(a).a);t.a={PAGE:1,msgChatIdMap:r}},"0xDb":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("2lMm"),r=n("+dnW");n("YtJ0");var s={set:function(e,t,n){var a=new Date,r=n;a.setTime(a.getTime()+24*r*3600*1e3),document.cookie=e+"="+t+";expires="+a.toGMTString()},get:function(e){for(var t,n=document.cookie.replace(/[ ]/g,"").split(";"),a=0;a<n.length;a++){var r=n[a].split("=");if(e==r[0]){t=r[1];break}}return t},delete:function(e){var t=new Date;t.setTime(t.getTime()-1e4),document.cookie=e+"=v; expires ="+t.toGMTString()}};t.b={dateFromat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=new Date(e),a=new Date;if(isNaN(n)&&(n=new Date(e.replace(/\\-/g,"/"))),a.getFullYear()===n.getFullYear()){if(a.getMonth()+a.getDate()===n.getMonth()+n.getDate()){var r=Math.floor((a-n)/1e3/60/60),s=Math.floor((a-n)/1e3/60),i=Math.floor((a-n)/1e3);return r<24&&r>0?r+"小时前"+t:r<=0&&s>0?s+"分钟前"+t:s<=0?i>10?i+"秒前"+t:"刚刚":n.getMonth()+1+"-"+n.getDate()}return n.getMonth()+1+"-"+n.getDate()}return n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()},isNull:function(e){return void 0===e||""===e||null===e},imagePreview:function(e,t){Object(a.a)({images:e,startPosition:t})},cookie:s,cache:{homeScrool:0,reMeListScroll:0,dianzanListScroll:0},getGreatCircleDistance:function(e,t,n,a){function r(e){return e*Math.PI/180}var s=r(e),i=r(n),o=s-i,u=r(t)-r(a),c=2*Math.asin(Math.sqrt(Math.pow(Math.sin(o/2),2)+Math.cos(s)*Math.cos(i)*Math.pow(Math.sin(u/2),2)));return c*=6378.137,c=Math.round(1e4*c)/1e4},global:r.a}},CNLI:function(e,t,n){"use strict";var a=n("lC5x"),r=n.n(a),s=n("J0Oq"),i=n.n(s),o=n("3cXf"),u=n.n(o),c=n("83B7"),l=n("0xDb"),p=n("YtJ0");function d(){var e=l.b.cookie.get("userId");return new WebSocket("ws://134.175.16.212:8764/webSocket?userId="+e)}var h=function(e){return{like:function(t){var n={token:t,message:"like"};e.send(u()(n))}}};function f(){var e;(e=d()).onopen=function(){console.log("socket已经连接")},e.onclose=function(){setTimeout(function(){console.log("socket断开,尝试重连"),f()},3e3)},e.onerror=function(){setTimeout(function(){d()},2e3)},e.onmessage=function(e){var t=JSON.parse(e.data),n={like:function(){},CHAT:function(){c.a.prototype.$notify({message:"您有新的消息",duration:2e3,className:"notify",background:"#1989fa"}),console.log(t),p.a.commit("message/updateMsg",t)}};n[t.msgType]&&n[t.msgType]()},c.a.prototype.$wsHelper=h(e)}t.a=i()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:f();case 1:case"end":return e.stop()}},e,this)}))},Dj7W:function(e,t){},JojC:function(e,t){},M7pd:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("83B7"),r=n("YtJ0"),s=n("lC5x"),i=n.n(s),o=n("J0Oq"),u=n.n(o),c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"main"}},[t("transition",{attrs:{"enter-active-class":"animated fadeInLeft","leave-active-class":"animated fadeOutLeft"}},[t("keep-alive",[this.$route.meta.keepAlive?t("router-view",{staticClass:"app-content"}):this._e()],1)],1),this._v(" "),t("transition",{attrs:{"enter-active-class":"animated fadeInRight","leave-active-class":"animated fadeOutRight"}},[this.$route.meta.keepAlive?this._e():t("div",{staticClass:"app-content"},[t("transition",{attrs:{"enter-active-class":this.enterAnimate,"leave-active-class":this.leaveAnimate}},[t("router-view",{staticClass:"app-content"})],1)],1)])],1)},staticRenderFns:[]};var l=n("C7Lr")({name:"App",data:function(){return{enterAnimate:"",leaveAnimate:""}},created:function(){this.$store.dispatch("common/initRedDot")},computed:{routerPathC:function(){return this.$store.state.routerPathC}},watch:{$route:function(e,t){this.$store.commit("setRoutePath",e.path);var n=["/","/read","/message","self"].includes(e.path);~this.routerPathC.indexOf(e.path)&&e.path===this.routerPathC[this.routerPathC.length-2]||n?(this.enterAnimate="animated fadeInLeft",this.leaveAnimate="animated fadeOutRight",this.$store.commit("setRouterCache",{isback:!0})):(this.$store.commit("setRouterCache",{isback:!1,val:e.path}),this.enterAnimate="animated fadeInRight",this.leaveAnimate="animated fadeOutLeft")}}},c,!1,function(e){n("JojC")},null,null).exports,p=n("KGCO"),d=[{path:"/",redirect:"/home",name:"homeWrap",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"47LJ"))},children:[{path:"/home",name:"home",component:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"OC6q"))}},{path:"/read",name:"read",component:function(){return n.e(16).then(n.bind(null,"wfRt"))}},{path:"/message",name:"message",component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"Fl22"))}},{path:"/self",name:"self",component:function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,"LWnr"))}}]},{path:"/home/shardDetail",name:"分享详情",component:function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,"ANHP"))},children:[{path:"replayDetail",name:"shardDetailReplay",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"ii/w"))}},{path:"moreReplay",name:"moreReplay",component:function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,"kL0G"))},children:[{path:"replayDetail",name:"moreReplayChild",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"ii/w"))}}]}]},{path:"/other/publish",name:"publish",component:function(){return n.e(11).then(n.bind(null,"99Dp"))}},{path:"/self/test",name:"测试页面",component:function(){return n.e(21).then(n.bind(null,"S9lM"))}},{path:"/message/dianzanlist",name:"点赞列表",component:function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,"WPLA"))}},{path:"/message/replay-me-reply",name:"回复我的列表",component:function(){return Promise.all([n.e(0),n.e(19)]).then(n.bind(null,"I++D"))}},{path:"/self/userinfo",name:"个人详情",component:function(){return n.e(17).then(n.bind(null,"QIN8"))},children:[{path:"modify",name:"userinfoModify",component:function(){return n.e(3).then(n.bind(null,"I8NV"))}}]},{path:"/self/setting",name:"设置",component:function(){return n.e(9).then(n.bind(null,"f+6M"))}},{path:"/self/collection",name:"收藏列表",component:function(){return n.e(8).then(n.bind(null,"6SpP"))}},{path:"/self/dynamic",name:"动态",component:function(){return n.e(18).then(n.bind(null,"suLQ"))}},{path:"/aboutMe",name:"关于我们",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"uSFO"))}},{path:"/dialog",name:"dialog",component:function(){return Promise.all([n.e(0),n.e(15)]).then(n.bind(null,"wc/q"))}},{path:"/login",name:"login",component:function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,"ktRq"))}},{path:"/register",name:"register",component:function(){return Promise.all([n.e(0),n.e(22)]).then(n.bind(null,"DVwZ"))}},{path:"/test",name:"test",component:function(){return n.e(6).then(n.bind(null,"Qfpc"))}}],h=n("0xDb"),f=void 0,m=void 0,v=function(e){api.addEventListener({name:"keyback"},function(t,n){e&&e(t,n)})},g=function(e){f=e},w=function(e){m=e};r.a.state.platform.isWeb&&(window.onfocus=function(){m&&m(),m=null},window.onblur=function(){f&&f(),f=null});var b=function(){api.confirm({title:"确定要退出app吗？",buttons:["确定","取消"]},function(e,t){1==e.buttonIndex&&api.closeWidget({silent:!0})})},y=function(){api.removeEventListener({name:"keyback"})};a.a.use(p.a);var x=new p.a({routes:d});x.beforeEach(function(e,t,n){var a=h.b.cookie.get("token");if(a||"login"===e.name||"register"===e.name)if(!a||"login"!==e.name&&"register"!==e.name){["/","/home","/self","/read","/message"].includes(e.path)?r.a.state.platform.isApicloud?v(function(){b()}):(window.history.pushState("forward",null,document.URL),window.onpopstate=function(){window.history.pushState("forward",null,document.URL),window.history.forward(1)}):r.a.state.platform.isApicloud?y():window.onpopstate=null,n()}else x.push({name:"home"});else x.push({name:"login"})});var k,L=x,C=n("aA9S"),I=n.n(C),A=n("aozt"),D=n.n(A),_=(k=u()(i.a.mark(function e(t){var n,a,r=t.url,s=t.data,o=void 0===s?{}:s,u=t.config,c=void 0===u?{files:!1}:u,l=t.sheader,p=void 0===l?{}:l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.files||(n={token:h.b.cookie.get("token"),userId:h.b.cookie.get("userId")},n=I()(n,p),o={serviceHeader:n,serviceBody:o}),e.next=3,D.a.post(r,o,c);case 3:if(!(a=e.sent)){e.next=6;break}return e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)})),function(e){return k.apply(this,arguments)});r.a.state.isMock;D.a.defaults.baseURL=r.a.state.ajaxUrl,D.a.defaults.showLoading=!0,D.a.defaults.showErr=!0,D.a.defaults.timeout=3e4;var S=function(e){a.a.prototype.$notify({message:e,className:"notify"})},M=function(e){if(a.a.prototype.$toast.clear(),"ECONNABORTED"===e.code&&-1!==e.message.indexOf("timeout"))return e.config.showErr&&S("请求超时");var t=e.response.data.msg||"请求失败";e.config.showErr&&S(t)};D.a.interceptors.request.use(function(e){return e.showLoading&&a.a.prototype.$toast.loading({mask:!1,message:"加载中...",duration:0}),e},M),D.a.interceptors.response.use(function(e){a.a.prototype.$toast.clear();var t=e.data;return"200000"===t.status?!t.data||!t.data.serviceBody||{h:t.data.serviceHeader,d:t.data.serviceBody}:"500004"===t.status?(h.b.cookie.delete("token"),S("登录过期，请重新登录"),void setTimeout(function(){L.replace({path:"login"})},200)):(e.config.showErr&&a.a.prototype.$notify(t.msg),!1)},M);var P=D.a,$=n("3khs"),T=n.n($),O=function(){var e=u()(i.a.mark(function e(t,n,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_({url:"/search/share/byId",data:{userId:t,page:n,pageSize:a}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}(),E={getShearList:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/search/share/list",data:e,config:{showLoading:!1,showErr:!1}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getShardDetail:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/user/share/init",config:{showLoading:!1},data:{shareId:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},shareReplyAll:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/user/share/reply/all",data:e,config:{showLoading:!1}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},userCollect:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/user/collect",data:{shardId:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},shareReplyArticle:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/user/share/reply/article",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getReplyDetail:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/user/share/reply/desc",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},shareReplyArticleChild:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/user/share/reply/article/child",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getMailSms:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/user/share/mail/activate",data:e,config:{headers:{login:"login"}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},mailRegister:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/user/share/mail/register",data:e,config:{headers:{login:"login"}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},mailLogin:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/user/share/mail/login",data:e,config:{headers:{login:"login"}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},sendShare:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/user/share/send",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},uploadImg:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/admin/upload/img/",data:e,config:{showLoading:!1,files:!0,headers:{"Content-Type":"multipart/form-data",login:"login",token:r.a.state.user.token,userId:r.a.state.user.userId}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getCollectionList:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/user/collect/list",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},delectCollection:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/user/collect/delect",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},outLogin:function(){var e=this;return u()(i.a.mark(function t(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_({url:"/user/share/cencel",config:{headers:{login:"login"}}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}))()},delectShare:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/user/share/del",data:{shareId:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},parseLikeShare:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/user/parse/share",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},parseLikeReplay:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/user/parse/reply",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getReplyMeList:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/search/reply/list",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getLikeMeLogs:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/search/parse/list",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},editUserInfo:function(e,t){var n=this;return u()(i.a.mark(function a(){var s,o,u,c,l,p;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=r.a.state.user.userInfo,o=s.userName,u=s.gender,c=s.addRess,l=s.userAvatar,(p={userName:o,gender:u,addRess:c,avatar:l})[e]=t,n.next=5,_({url:"/user/info/edit",data:p});case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}},a,n)}))()},getUserInfo:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_({url:"/search/userInfo",data:{token:e,loginType:"N"},config:{headers:{login:"login"}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},delReply:function(e,t){var n=this;return u()(i.a.mark(function a(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_({url:"/user/share/reply/del",data:{replyId:e,replyType:t}});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},a,n)}))()},sendSocketMsg:function(e,t,n){var a=this;return u()(i.a.mark(function r(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_({url:"/push/socket",data:{msgType:e,conversationID:n,socketMsg:t}});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},r,a)}))()},getuserInfoShear:O,setChatId:function(e,t){var n=this;return u()(i.a.mark(function a(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_({url:"/push/get/conversation",data:{oneUserId:e,twoUserId:t}});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},a,n)}))()},getChatList:function(e,t){var n=this;return u()(i.a.mark(function a(){var r;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_({url:"/search/chat/conversations",data:{page:e,pageSize:t}});case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}},a,n)}))()}},R=n("2lMm"),N=(n("Dj7W"),n("CNLI")),F={container:{overflowY:"scroll",width:"100%",height:"100%"}},z=0,B=0,U={name:"vue-virtual-Infinite-list",props:{defaultHeight:{type:Number,default:200},tobottom:void 0},data:function(){return{heights:[],offset:0,scrollTop:0}},methods:{onscroll:function(e,t){this.$emit("onscroll",e,t)}},mounted:function(){var e=this.$refs.container,t=this;e&&(e.onscroll=function(){t.scrollTop=this.scrollTop||0,t.onscroll(this,{offset:this.scrollTop}),0===B&&t.$emit("tobottom")})},render:function(e){var t=this,n=this.$slots.default;if(n){var a=[],r=this.defaultHeight,s=this.scrollTop,i=this.heights;z=0,B=0;var o=0,u=0;for(Array.prototype.forEach.call(n,function(e,n){var a=n,r=0;e.data&&e.data.style&&e.data.style.height&&(r=parseInt(e.data.style.height)),t.heights[a]||(t.heights[a]=r)});i.length;){var c=i[u]||r;if(o+c>s-700)break;u+=1,o+=c}z=o;for(var l=u+13;u<l;u++)a.push(n[u]);for(;u<n.length;u+=1)B+=i[u]||r;return e("div",{ref:"container",style:[F.container]},[e("div",{style:[{paddingTop:z+"px",paddingBottom:B+"px"}]},a)])}}},j=n("Yr0d"),G=n("rVsN"),H=n.n(G),Y=n("hRKE"),J=n.n(Y),W={components:{loadinganite:j.a},data:function(){return{show:!1,loading:!0,list:[],animiteEnt:"animated bounceIn",animateLev:"animated bounceOut"}},props:{userava:{type:String,default:""},username:{type:String,default:""},userid:{type:String,default:""}},methods:{close:function(){this.animateLev="animated bounceOut",this.show=!1,this.$emit("input",!1)},close2:function(){this.animateLev="",this.show=!1,this.$emit("input",!1)},gotoDiloag:function(){this.close2(),window.vueObj.$router.push({name:"dialog",params:{username:this.username,userId:this.userid,userava:this.userava}})},getShear:function(){var e=this;return u()(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e.userid,1,10);case 2:n=t.sent,e.list=n.d.shares,e.loading=!1;case 5:case"end":return t.stop()}},t,e)}))()}},watch:{show:function(e){e&&this.getShear()}}},K={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wx-info"},[n("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"mask",on:{click:e.close}})]),e._v(" "),n("transition",{attrs:{"enter-active-class":e.animiteEnt,"leave-active-class":e.animateLev}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"wrap"},[n("span",{staticClass:"closeBnt iconfont icon-guanbi",on:{click:e.close}}),e._v(" "),n("img",{staticClass:"userAva",attrs:{src:e.userava,alt:""}}),e._v(" "),n("p",{staticClass:"username"},[e._v(e._s(e.username))]),e._v(" "),n("van-button",{staticClass:"msgBtn",attrs:{type:"info"},on:{click:e.gotoDiloag}},[e._v("私聊")]),e._v(" "),n("div",{staticClass:"content"},[n("h3",{staticClass:"title"},[e._v("他的动态")]),e._v(" "),n("div",{staticClass:"cont"},[n("loadinganite",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]}),e._v(" "),e._l(e.list,function(t,a){return n("div",{key:a,staticClass:"shearItem"},[e._v(e._s(t.shareContent))])})],2)])],1)])],1)},staticRenderFns:[]};var q=n("C7Lr")(W,K,!1,function(e){n("oKYB")},"data-v-bb4ff7a8",null).exports,Q=void 0,V=void 0,Z={install:function(e){var t=e.extend(q);Q||(Q=new t({el:document.createElement("div")}),document.body.appendChild(Q.$el));var n={show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==(void 0===e?"undefined":J()(e)))throw new Error("参数options不是一个有效的JSON");V&&V(),function(e,t){var n={};for(var a in e.$options.props)"value"!==a&&(n[a]=e.$options.props[a].default);var r=I()({},n,t);for(var s in r)e[s]=r[s]}(Q,e),e.onHide&&(V=Q.$watch("show",function(t){!1===t&&e.onHide&&e.onHide(Q)})),Q.show=!0},hide:function(){Q.show=!1}};e.$wechat?e.$myplug.info=n:e.$myplug={info:n},e.mixin({created:function(){this.$myplug=e.$myplug}})}},X=Z,ee=function(){String.prototype.gblen=function(){for(var e=0,t=0;t<this.length;t++)this.charCodeAt(t)>127||94==this.charCodeAt(t)?e+=2:e++;return e},a.a.use(T.a,P),a.a.use(R.c),a.a.use(R.b),a.a.use(X),a.a.component("auto-virtual-list",U),a.a.component("loadinganite",j.a),a.a.prototype.$BMap=function(){var e=document.createElement("div"),t=new BMap.Map(e),n=new BMap.Point(116.331398,39.897445);t.centerAndZoom(n,12);var a=new BMap.Geolocation;function s(){return new H.a(function(e,t){a.enableSDKLocation(),a.getCurrentPosition(function(t){if(this.getStatus()==BMAP_STATUS_SUCCESS){var n={lng:t.point.lng,lat:t.point.lat};r.a.commit("user/UPDATE_LOCATION",n),e(n)}else e(!1)})})}return s().then(function(e){e||console.log("获取地理位置失败"),console.log("获取地理位置成功",e),r.a.commit("user/UPDATE_LOCATION",e),r.a.commit("listHelper/updateList")}),{getPosition:s}}(),a.a.prototype.$utils=h.b,a.a.prototype.$apihelper=E,a.a.config.productionTip=!1,window.vueObj=new a.a({el:"#app",router:L,components:{App:l},store:r.a,template:"<App/>",beforeCreate:function(){var e=this;return u()(i.a.mark(function t(){var n,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=h.b.cookie.get("token"),a=h.b.cookie.get("userId"),n&&a?(e.$store.dispatch("message/loadDialogList"),r.a.dispatch("user/login_success",n),Object(N.a)()):e.$router.replace({path:"/login"});case 3:case"end":return t.stop()}},t,e)}))()}})},te=(n("nuyN"),n("ZLEe")),ne=n.n(te),ae={countFromat:function(e){return e<1e3?e:e>1e3?(e/1e3).toFixed(1)+"k":e>1e6?(e/1e6).toFixed(1)+"m":void 0},distanceFromat:function(e){return e<1?parseInt(1e3*e)+"米":Math.ceil(e)+"公里"}},re=n("iDdd"),se=n.n(re),ie=n("cLQA"),oe=n.n(ie),ue=r.a.state.ajaxUrl,ce=r.a.state.user.userId;var le,pe,de,he=[{name:"getChatList",url:ue+"/search/chat/conversations",data:(le={"conversations|5-8":[{"conversationID|12345678-23456789":23456789,info:{"ava|+1":["http://img.wuxfly.com/1552029040043447","https://gss3.bdstatic.com/84oSdTum2Q5BphGlnYG/timg?wapp&quality=80&size=b150_150&subsize=20480&cut_x=0&cut_w=0&cut_y=0&cut_h=0&sec=1369815402&srctrace&di=4ce80937b3c819f42e7fd5389d186454&wh_rate=null&src=http%3A%2F%2Fimgsrc.baidu.com%2Fforum%2Fpic%2Fitem%2F2cf5e0fe9925bc31ca72c2bc50df8db1cb1370e3.jpg","https://gss0.bdstatic.com/6LZ1dD3d1sgCo2Kml5_Y_D3/sys/portrait/item/280ae5a682e69c88e4b8b6536379746865598c?t=1453561031","https://gss0.bdstatic.com/6LZ1dD3d1sgCo2Kml5_Y_D3/sys/portrait/item/eda1e5b2815f5fe6b581e7a09a6f2e?t=1403955147"],"name|+1":["张三","李四","雄武","大壮","州基隆"]},meId:ce,"toId|12345678-23456789":23456789,"msgList|1-5":[{"userid|12345678-23456789":23456789,"text|1":["十大","asd啊是大","发哦i请问"]}]}]},{status:"200000",data:{serviceHeader:{token:"mock数据",userid:"mock数据"},serviceBody:le}})}];se.a.attach(document.body),pe=a.a,ne()(ae).forEach(function(e){pe.filter(e,ae[e])}),Object({NODE_ENV:"production"}).MOCK&&function(){for(var e=0,t=he.length;e<t;e++){var n=he[e];oe.a.mock(n.url,n.data)}}(),r.a.state.platform.isApicloud?window.apiready=(de=ee,function(){a.a.prototype.$native={listenerKeyback:v,removeListenKeyback:y,exitApp:b,setPause:g,setResume:w},de()}):ee()},Yr0d:function(e,t,n){"use strict";var a={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"loading-adminte"}},[t("div",{staticClass:"d"},[t("span",{staticClass:"s"})]),this._v(" "),t("div",{staticClass:"d"},[t("span",{staticClass:"s"})]),this._v(" "),t("div",{staticClass:"d"},[t("span",{staticClass:"s"})])])}]};var r=n("C7Lr")({},a,!1,function(e){n("M7pd")},"data-v-a59423f6",null);t.a=r.exports},YtJ0:function(e,t,n){"use strict";var a=n("83B7"),r=n("R4Sj"),s=n("lC5x"),i=n.n(s),o=n("J0Oq"),u=n.n(o),c=n("0xDb"),l={namespaced:!0,state:{islogin:!1,token:c.a.get("token"),userId:"",hasLatLng:!1,lat:"",lng:"",userInfo:{country:"中国",province:"广东",city:"深圳",userMail:"",userAvatar:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1551893841562&di=345411edc20bb9c87203881672904900&imgtype=0&src=http%3A%2F%2Fbpic.588ku.com%2Felement_origin_min_pic%2F01%2F31%2F87%2F96573b585a7c9c4.jpg",userName:"洪涛",gender:"0",addRess:""}},mutations:{LOGIN_SUCCESS:function(e,t){for(var n in e.islogin=!0,t)"id"===n&&(e.userId=t[n]),e.userInfo[n]=t[n]},UPDATE_USERDATA:function(e,t){for(var n in t)"id"===n&&(e.userId=t[n]),e.userInfo[n]=t[n]},UPDATE_LOCATION:function(e,t){e.lat=t.lat,e.lng=t.lng,e.hasLatLng=!0}},actions:{login_success:function(e,t){var n=this,a=e.commit;return u()(i.a.mark(function e(){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._vm.$apihelper.getUserInfo(t);case 2:r=e.sent,a("LOGIN_SUCCESS",r.d);case 4:case"end":return e.stop()}},e,n)}))()}}},p=n("HzJ8"),d=n.n(p),h=n("IHPB"),f=n.n(h),m=n("+dnW");function v(e,t,n){e.shareImg?e.height="260px":e.height="150px",e.shareImg=e.shareImg.split(","),e.createTime=c.b.dateFromat(e.createTime),e.distance=c.b.getGreatCircleDistance(t,n,e.shareLat,e.shareLng),e.distance=window.vueObj.$options.filters.distanceFromat(e.distance)}var g={namespaced:!0,state:{pageSize:20,activeType:"newest",newest:{list:[],page:m.a.PAGE,finished:!1},nearby:{list:[],page:m.a.PAGE,finished:!1},dynamic:{list:[],page:m.a.PAGE,finished:!1},replyMeList:{page:m.a.PAGE,pageSize:20,finished:!1,list:[]},dianzanList:{page:m.a.PAGE,pageSize:20,finished:!1,list:[]}},mutations:{setList:function(e,t){var n,a=t.type,r=t.isreload,s=t.list,i=this.state.user.lat,o=this.state.user.lng,u=!0,c=!1,l=void 0;try{for(var p,h=d()(s);!(u=(p=h.next()).done);u=!0){v(p.value,i,o)}}catch(e){c=!0,l=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw l}}r?(e[a].list=s,e[a].finished=!1,e[a].page=m.a.PAGE):(n=e[a].list).push.apply(n,f()(s));e[a].page++,s.length<10&&(e[a].finished=!0)},Like:function(e,t){var n=t.index,a=t.type;e[a].list[n].parse=!0,e[a].list[n].shareLikeCount+=1},setList2:function(e,t){var n,a=t.isreload,r=t.list,s=t.name;a?(e[s].page=0,e[s].finished=!1,e[s].list=r):(e[s].page++,(n=e[s].list).push.apply(n,f()(r)));r.length<e[s].pageSize&&(e[s].finished=!0)},updateList:function(e){var t=!0,n=!1,a=void 0;try{for(var r,s=d()(["nearby","dynamic","newest"]);!(t=(r=s.next()).done);t=!0){var i=r.value,o=!0,u=!1,l=void 0;try{for(var p,h=d()(e[i].list);!(o=(p=h.next()).done);o=!0){var f=p.value,m=this.state.user.lat,v=this.state.user.lng;f.distance=c.b.getGreatCircleDistance(m,v,f.shareLat,f.shareLng),f.distance=window.vueObj.$options.filters.distanceFromat(f.distance)}}catch(e){u=!0,l=e}finally{try{!o&&h.return&&h.return()}finally{if(u)throw l}}}}catch(e){n=!0,a=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw a}}}},actions:{getlistHelper:function(e,t){var n=this,a=e.commit,r=e.state;return u()(i.a.mark(function e(){var s,o,u,c,l,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=t.isreload,o=t.type,u=t.cb,c=void 0,l=void 0,e.t0=o,e.next="newest"===e.t0?5:"nearby"===e.t0?8:"dynamic"===e.t0?11:14;break;case 5:return c=r.newest.page,l="B",e.abrupt("break",14);case 8:return c=r.nearby.page,l="A",e.abrupt("break",14);case 11:return c=r.dynamic.page,l="C",e.abrupt("break",14);case 14:return s&&(c=m.a.PAGE),e.next=17,n._vm.$apihelper.getShearList({lng:n.state.user.lng+"",lat:n.state.user.lat+"",searchType:l,page:c+"",pageSize:r.pageSize+""});case 17:if(p=e.sent){e.next=20;break}return e.abrupt("return");case 20:a("setList",{type:o,isreload:s,list:p.d.shareList}),u&&u();case 22:case"end":return e.stop()}},e,n)}))()},replyMeList:function(e,t){var n=this,a=e.commit,r=e.state;return u()(i.a.mark(function e(){var s,o,u,c,l,p,h,f,m;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.isreload,o=t.cb,e.next=3,n._vm.$apihelper.getReplyMeList({page:r.replyMeList.page+"",pageSize:r.replyMeList.pageSize+""});case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return");case 6:for(c=!0,l=!1,p=void 0,e.prev=9,h=d()(u.d.replyList);!(c=(f=h.next()).done);c=!0)(m=f.value).comment.replies?m.child=!0:m.child=!1,m.share.shareImg=m.share.shareImg.split(","),m.comment.replyTime=n._vm.$utils.dateFromat(m.comment.replyTime),m.comment.replies?m.isChild=!0:m.isChild=!1;e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),l=!0,p=e.t0;case 17:e.prev=17,e.prev=18,!c&&h.return&&h.return();case 20:if(e.prev=20,!l){e.next=23;break}throw p;case 23:return e.finish(20);case 24:return e.finish(17);case 25:a("setList2",{isreload:s,list:u.d.replyList,name:"replyMeList"}),o&&o();case 27:case"end":return e.stop()}},e,n,[[9,13,17,25],[18,,20,24]])}))()},dianzanList:function(e,t){var n=this,a=e.commit,r=e.state;return u()(i.a.mark(function e(){var s,o,u,c,l,p,h,f,m;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.isreload,o=t.cb,e.next=3,n._vm.$apihelper.getLikeMeLogs({page:r.dianzanList.page+"",pageSize:r.dianzanList.pageSize+""});case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return",o&&o(!1));case 6:for(c=!0,l=!1,p=void 0,e.prev=9,h=d()(u.d.parseList);!(c=(f=h.next()).done);c=!0)(m=f.value).comment?m.isComment=!0:m.isComment=!1;e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),l=!0,p=e.t0;case 17:e.prev=17,e.prev=18,!c&&h.return&&h.return();case 20:if(e.prev=20,!l){e.next=23;break}throw p;case 23:return e.finish(20);case 24:return e.finish(17);case 25:a("setList2",{isreload:s,list:u.d.parseList,name:"dianzanList"}),o&&o();case 27:case"end":return e.stop()}},e,n,[[9,13,17,25],[18,,20,24]])}))()}}};var w={namespaced:!0,state:{dialogList:[],page:0,pageSize:40,sessionId:-1},mutations:{updateMsg:function(e,t){var n=e.dialogList.findIndex(function(e){return e.conversationID===t.conversationID});if(~n)e.dialogList[n].msgList.push(t.msg);else{var a=function(e){return e.msgList=[e.msg],e}(t);e.dialogList.push(a)}},loadDialogList:function(e,t){var n,a=t.list;t.isload&&e.dialogList.splice(0),(n=e.dialogList).push.apply(n,f()(a)),console.log("消息列表",a)}},actions:{loadDialogList:function(e){var t=this,n=e.commit,a=e.state,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return u()(i.a.mark(function e(){var s,o,u,c,l,p,h,f,m;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._vm.$apihelper.getChatList(a.page,a.pageSize);case 2:for(s=e.sent,o=s.d.conversations,t.state.isMock||(o=o.map(function(e){var n=e.userIdOne===t.state.user.userId;return{conversationID:e.conversationID,info:{ava:n?e.userAvatarTwo:e.userAvatarOne,name:n?e.userNameTwo:e.userNameOne},msgList:[],meId:n?e.userIdOne:e.userIdTwo,toId:n?e.userIdTwo:e.userIdOne}})),u=t._vm.$utils.global.msgChatIdMap,c=!0,l=!1,p=void 0,e.prev=9,h=d()(o);!(c=(f=h.next()).done);c=!0)m=f.value,u.set(m.toId,m.conversationID);e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),l=!0,p=e.t0;case 17:e.prev=17,e.prev=18,!c&&h.return&&h.return();case 20:if(e.prev=20,!l){e.next=23;break}throw p;case 23:return e.finish(20);case 24:return e.finish(17);case 25:n("loadDialogList",{list:o,isload:r});case 26:case"end":return e.stop()}},e,t,[[9,13,17,25],[18,,20,24]])}))()}}};a.a.use(r.a);t.a=new r.a.Store({state:{ajaxUrl:"http://www.wuxfly.com:2019",routerPathC:[],curRoutePath:"/",isMock:Object({NODE_ENV:"production"}).MOCK,platform:{isApicloud:navigator.userAgent.toLowerCase().includes("apicloud"),isWx:navigator.userAgent.toLowerCase().includes("micromessenger"),isIos:navigator.userAgent.match(/(iPhone|iPod|iPad);?/i),isAndroid:navigator.userAgent.match(/android/i),isWeb:!navigator.userAgent.toLowerCase().includes("micromessenger")&&!navigator.userAgent.toLowerCase().includes("apicloud")}},mutations:{setRouterCache:function(e,t){var n=t.isback,a=t.val;n?e.routerPathC.pop():e.routerPathC.push(a)},setRoutePath:function(e,t){e.curRoutePath=t}},getters:{},actions:{},modules:{user:l,listHelper:g,common:{namespaced:!0,state:{redDot:{self:!1,downloadApp:!1}},mutations:{INITREDDOT:function(e,t){for(var n in t)e.redDot[n]=t[n]}},actions:{initRedDot:function(e){var t=e.commit,n=!1,a=!1;this.state.platform.isWeb&&this.state.platform.isAndroid&&(a=!0),a&&(n=!0),t("INITREDDOT",{self:n,downloadApp:a})}}},message:w}})},oKYB:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.6e12af641ca2eae4e910.js.map