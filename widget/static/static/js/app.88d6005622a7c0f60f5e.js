webpackJsonp([23],{"0xDb":function(e,t,n){"use strict";var r=n("2lMm"),a=n("YtJ0");var s={set:function(e,t,n){var r=new Date,a=n;r.setTime(r.getTime()+24*a*3600*1e3),document.cookie=e+"="+t+";expires="+r.toGMTString()},get:function(e){for(var t,n=document.cookie.replace(/[ ]/g,"").split(";"),r=0;r<n.length;r++){var a=n[r].split("=");if(e==a[0]){t=a[1];break}}return t},delete:function(e){var t=new Date;t.setTime(t.getTime()-1e4),document.cookie=e+"=v; expires ="+t.toGMTString()}};t.a={dateFromat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=new Date(e),r=new Date;if(isNaN(n)&&(n=new Date(e.replace(/\\-/g,"/"))),r.getFullYear()===n.getFullYear()){if(r.getMonth()+r.getDate()===n.getMonth()+n.getDate()){var a=Math.floor((r-n)/1e3/60/60),s=Math.floor((r-n)/1e3/60),i=Math.floor((r-n)/1e3);return a<24&&a>0?a+"小时前"+t:a<=0&&s>0?s+"分钟前"+t:s<=0?i>10?i+"秒前"+t:"刚刚":n.getMonth()+1+"-"+n.getDate()}return n.getMonth()+1+"-"+n.getDate()}return n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()},isNull:function(e){return void 0===e||""===e||null===e},imagePreview:function(e,t){Object(r.a)({images:e,startPosition:t})},cookie:s,getCookiesUserinfo:function(){var e=s.get("seesionuser");return!!e&&JSON.parse(e)},cache:{homeScrool:0,reMeListScroll:0,dianzanListScroll:0},getGreatCircleDistance:function(e,t){var n=a.a.state.user.lat*Math.PI/180,r=e*Math.PI/180,s=n-r,i=a.a.state.user.lng*Math.PI/180-t*Math.PI/180,o=2*Math.asin(Math.sqrt(Math.pow(Math.sin(s/2),2)+Math.cos(n)*Math.cos(r)*Math.pow(Math.sin(i/2),2)));return o*=6378.137,o=Math.round(1e4*o)/1e4}}},CNLI:function(e,t,n){"use strict";var r=n("lC5x"),a=n.n(r),s=n("J0Oq"),i=n.n(s),o=n("3cXf"),u=n.n(o),c=n("83B7");n("YtJ0"),n("0xDb");function l(){var e=JSON.parse(localStorage.getItem("seesionuser")).h.token;return new WebSocket("ws://134.175.16.212:2019/webSocket?token="+e)}var p=function(e){return{like:function(t){var n={token:t,message:"like"};e.send(u()(n))}}};t.a=i()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=l()).onopen=function(){console.log("socket已经连接")},t.onclose=function(){console.log("socket断开")},t.onerror=function(){setTimeout(function(){l()},2e3)},t.onmessage=function(e){switch(e.data){case"like":c.default.prototype.$notify({message:"有人给你点赞了",duration:2e3,className:"notify",background:"#1989fa"})}},c.default.prototype.$wsHelper=p(t),e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)}))},Dj7W:function(e,t){},M7pd:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("83B7"),a=n("YtJ0"),s=n("lC5x"),i=n.n(s),o=n("J0Oq"),u=n.n(o),c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"main"}},[t("transition",{attrs:{"enter-active-class":"animated fadeInLeft","leave-active-class":"animated fadeOutLeft"}},[t("keep-alive",[this.$route.meta.keepAlive?t("router-view",{staticClass:"app-content"}):this._e()],1)],1),this._v(" "),t("transition",{attrs:{"enter-active-class":"animated fadeInRight","leave-active-class":"animated fadeOutRight"}},[this.$route.meta.keepAlive?this._e():t("div",{staticClass:"app-content"},[t("transition",{attrs:{"enter-active-class":this.enterAnimate,"leave-active-class":this.leaveAnimate}},[t("router-view",{staticClass:"app-content"})],1)],1)])],1)},staticRenderFns:[]};var l=n("C7Lr")({name:"App",data:function(){return{enterAnimate:"",leaveAnimate:""}},computed:{routerPathC:function(){return this.$store.state.routerPathC}},watch:{$route:function(e,t){this.$store.commit("setRoutePath",e.path);var n=["/","/read","/message","self"].includes(e.path);~this.routerPathC.indexOf(e.path)&&e.path===this.routerPathC[this.routerPathC.length-2]||n?(this.enterAnimate="animated fadeInLeft",this.leaveAnimate="animated fadeOutRight",this.$store.commit("setRouterCache",{isback:!0})):(this.$store.commit("setRouterCache",{isback:!1,val:e.path}),this.enterAnimate="animated fadeInRight",this.leaveAnimate="animated fadeOutLeft")}}},c,!1,function(e){n("q+kZ")},null,null).exports,p=n("KGCO"),d=[{path:"/",redirect:"/home",name:"homeWrap",component:function(){return n.e(2).then(n.bind(null,"47LJ"))},children:[{path:"/home",name:"home",component:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"OC6q"))}},{path:"/read",name:"read",component:function(){return n.e(17).then(n.bind(null,"wfRt"))}},{path:"/message",name:"message",component:function(){return n.e(5).then(n.bind(null,"Fl22"))}},{path:"/self",name:"self",component:function(){return Promise.all([n.e(0),n.e(18)]).then(n.bind(null,"LWnr"))}}]},{path:"/home/shardDetail",name:"分享详情",component:function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,"ANHP"))},children:[{path:"replayDetail",name:"shardDetailReplay",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"ii/w"))}},{path:"moreReplay",name:"moreReplay",component:function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"kL0G"))},children:[{path:"replayDetail",name:"moreReplayChild",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"ii/w"))}}]}]},{path:"/other/publish",name:"publish",component:function(){return n.e(15).then(n.bind(null,"99Dp"))}},{path:"/self/test",name:"测试页面",component:function(){return n.e(9).then(n.bind(null,"S9lM"))}},{path:"/message/dianzanlist",name:"点赞列表",component:function(){return Promise.all([n.e(0),n.e(16)]).then(n.bind(null,"WPLA"))}},{path:"/message/replay-me-reply",name:"回复我的列表",component:function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"I++D"))}},{path:"/self/userinfo",name:"个人详情",component:function(){return n.e(10).then(n.bind(null,"QIN8"))},children:[{path:"modify",name:"userinfoModify",component:function(){return n.e(12).then(n.bind(null,"I8NV"))}}]},{path:"/self/setting",name:"设置",component:function(){return n.e(11).then(n.bind(null,"f+6M"))}},{path:"/self/collection",name:"收藏列表",component:function(){return n.e(6).then(n.bind(null,"6SpP"))}},{path:"/self/dynamic",name:"动态",component:function(){return n.e(19).then(n.bind(null,"suLQ"))}},{path:"/aboutMe",name:"关于我们",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"uSFO"))}},{path:"/login",name:"login",component:function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,"ktRq"))}},{path:"/register",name:"register",component:function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,"DVwZ"))}},{path:"/test",name:"test",component:function(){return n.e(4).then(n.bind(null,"Qfpc"))}}],f=void 0,h=void 0,m=function(e){api.addEventListener({name:"keyback"},function(t,n){e&&e(t,n)})},v=function(e){f=e},g=function(e){h=e};a.a.state.platform.isWeb&&(window.onfocus=function(){h&&h(),h=null},window.onblur=function(){f&&f(),f=null});var w=function(){api.confirm({title:"确定要退出app吗？",buttons:["确定","取消"]},function(e,t){1==e.buttonIndex&&api.closeWidget({silent:!0})})},b=function(){api.removeEventListener({name:"keyback"})};r.default.use(p.a);var y=new p.a({mode:"history",scrollBehavior:function(e,t,n){if(e.hash)return{selector:e.hash}},routes:d});y.beforeEach(function(e,t,n){var r=localStorage.getItem("seesionuser");if(r||"login"===e.name||"register"===e.name)if(!r||"login"!==e.name&&"register"!==e.name){["/","/home","/self","/read","/message"].includes(e.path)?a.a.state.platform.isApicloud?m(function(){w()}):(window.history.pushState("forward",null,document.URL),window.onpopstate=function(){window.history.pushState("forward",null,document.URL),window.history.forward(1)}):a.a.state.platform.isApicloud?b():window.onpopstate=null,n()}else y.push({name:"home"});else y.push({name:"login"})});var k,x=y,L=n("aA9S"),C=n.n(L),M=n("aozt"),S=n.n(M),I=n("0xDb"),P=(k=u()(i.a.mark(function e(t){var n,r,s=t.url,o=t.data,u=void 0===o?{}:o,c=t.config,l=void 0===c?{files:!1}:c,p=t.sheader,d=void 0===p?{}:p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.files||(n={token:a.a.state.user.token,userId:a.a.state.user.userId},n=C()(n,d),u={serviceHeader:n,serviceBody:u}),e.next=3,S.a.post(s,u,l);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)})),function(e){return k.apply(this,arguments)});S.a.defaults.baseURL=a.a.state.ajaxUrl,S.a.defaults.showLoading=!0,S.a.defaults.showErr=!0,S.a.defaults.timeout=3e4;var A=function(e){r.default.prototype.$notify({message:e,className:"notify"})},R=function(e){if(r.default.prototype.$toast.clear(),"ECONNABORTED"===e.code&&-1!==e.message.indexOf("timeout"))return e.config.showErr&&A("请求超时");var t=e.response.data.msg||"请求失败";e.config.showErr&&A(t)};S.a.interceptors.request.use(function(e){return e.showLoading&&r.default.prototype.$toast.loading({mask:!1,message:"加载中...",duration:0}),e},R),S.a.interceptors.response.use(function(e){r.default.prototype.$toast.clear();var t=e.data;return"200000"===t.status?!t.data||!t.data.serviceHeader||{h:t.data.serviceHeader,d:t.data.serviceBody}:"500004"===t.status?(I.a.cookie.delete("seesionuser"),localStorage.setItem("seesionuser",""),A("登录过期，请重新登录"),void setTimeout(function(){x.replace({path:"login"})},200)):(e.config.showErr&&r.default.prototype.$notify(t.msg),!1)},R);var $,D,_=S.a,O=n("3khs"),T=n.n(O),F={getShearList:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/search/share/list",data:e,config:{showLoading:!1,showErr:!1}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getShardDetail:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/user/share/init",config:{showLoading:!1},data:{shareId:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},shareReplyAll:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/user/share/reply/all",data:e,config:{showLoading:!1}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},userCollect:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/user/collect",data:{shardId:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},shareReplyArticle:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/user/share/reply/article",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getReplyDetail:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/user/share/reply/desc",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},shareReplyArticleChild:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/user/share/reply/article/child",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getMailSms:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/user/share/mail/activate",data:e,config:{headers:{login:"login"}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},mailRegister:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/user/share/mail/register",data:e,config:{headers:{login:"login"}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},mailLogin:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/user/share/mail/login",data:e,config:{headers:{login:"login"}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},sendShare:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/user/share/send",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},uploadImg:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/admin/upload/img/",data:e,config:{showLoading:!1,files:!0,headers:{"Content-Type":"multipart/form-data",login:"login",token:a.a.state.user.token,userId:a.a.state.user.userId}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getCollectionList:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/user/collect/list",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},delectCollection:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/user/collect/delect",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},outLogin:function(){var e=this;return u()(i.a.mark(function t(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P({url:"/user/share/cencel"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}))()},delectShare:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/user/share/del",data:{shareId:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},parseLikeShare:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/user/parse/share",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},parseLikeReplay:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/user/parse/reply",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getReplyMeList:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/search/reply/list",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getLikeMeLogs:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({url:"/search/parse/list",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()}},N=n("2lMm"),z=(n("Dj7W"),n("CNLI")),E=n("6vHQ"),H=n.n(E),B={container:{overflowY:"scroll",width:"100%",height:"100%"}},J=0,j=0,q={name:"vue-virtual-Infinite-list",props:{defaultHeight:{type:Number,default:200},tobottom:void 0},data:function(){return{heights:[],offset:0,scrollTop:0}},methods:{onscroll:function(e,t){this.$emit("onscroll",e,t)}},mounted:function(){var e=this.$refs.container,t=this;e&&(e.onscroll=function(){t.scrollTop=this.scrollTop||0,t.onscroll(this,{offset:this.scrollTop}),0===j&&t.$emit("tobottom")})},render:function(e){var t=this,n=this.$slots.default;if(n){var r=[],a=this.defaultHeight,s=this.scrollTop,i=this.heights;J=0,j=0;var o=0,u=0;for(Array.prototype.forEach.call(n,function(e,n){var r=n,a=0;e.data&&e.data.style&&e.data.style.height&&(a=parseInt(e.data.style.height)),t.heights[r]||(t.heights[r]=a)});i.length;){var c=i[u]||a;if(o+c>s-700)break;u+=1,o+=c}J=o;for(var l=u+13;u<l;u++)r.push(n[u]);for(;u<n.length;u+=1)j+=i[u]||a;return e("div",{ref:"container",style:[B.container]},[e("div",{style:[{paddingTop:J+"px",paddingBottom:j+"px"}]},r)])}}},G=n("Yr0d"),U=n("rVsN"),W=n.n(U),Y=function(){r.default.use(T.a,_),r.default.use(N.c),r.default.use(N.b),r.default.component("virtual-list",H.a),r.default.component("auto-virtual-list",q),r.default.component("loadinganite",G.a),r.default.prototype.$BMap=function(){var e=document.createElement("div"),t=new BMap.Map(e),n=new BMap.Point(116.331398,39.897445);t.centerAndZoom(n,12);var r=new BMap.Geolocation;function s(){return new W.a(function(e,t){r.getCurrentPosition(function(t){if(this.getStatus()==BMAP_STATUS_SUCCESS){var n={lng:parseInt(t.point.lng),lat:parseInt(t.point.lat)};console.log(t),e(n)}else e(!1)})})}return s().then(function(e){e||console.log("获取地理位置失败"),console.log("获取地理位置成功",e),a.a.state.user.hasLatLng=!0,a.a.state.user.lat=e.lat,a.a.state.user.lng=e.lng,a.a.commit("listHelper/updateList")}),{getPosition:s}}(),r.default.prototype.$utils=I.a,r.default.prototype.$apihelper=F,r.default.config.productionTip=!1,window.vueObj=new r.default({el:"#app",router:x,components:{App:l},store:a.a,template:"<App/>",beforeCreate:function(){var e=this;return u()(i.a.mark(function t(){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=localStorage.getItem("seesionuser"),(r=!!n&&JSON.parse(n))&&(a.a.commit("user/LOGIN_SUCCESS",r),Object(z.a)());case 3:case"end":return e.stop()}},t,e)}))()}})},Z=(n("nuyN"),n("ZLEe")),Q=n.n(Z),K={countFromat:function(e){return e<1e3?e:e>1e3?(e/1e3).toFixed(1)+"k":e>1e6?(e/1e6).toFixed(1)+"m":void 0},distanceFromat:function(e){return e<1e3?parseInt(e)+"米":Math.ceil(e/1e3)+"公里"}},V=n("iDdd");n.n(V).a.attach(document.body),$=r.default,Q()(K).forEach(function(e){$.filter(e,K[e])}),a.a.state.platform.isApicloud?window.apiready=(D=Y,function(){r.default.prototype.$native={listenerKeyback:m,removeListenKeyback:b,exitApp:w,setPause:v,setResume:g},D()}):Y()},Yr0d:function(e,t,n){"use strict";var r={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"loading-adminte"}},[t("div",{staticClass:"d"},[t("span",{staticClass:"s"})]),this._v(" "),t("div",{staticClass:"d"},[t("span",{staticClass:"s"})]),this._v(" "),t("div",{staticClass:"d"},[t("span",{staticClass:"s"})])])}]};var a=n("C7Lr")({},r,!1,function(e){n("M7pd")},"data-v-a59423f6",null);t.a=a.exports},YtJ0:function(e,t,n){"use strict";var r=n("83B7"),a=n("R4Sj"),s=n("lC5x"),i=n.n(s),o=n("J0Oq"),u=n.n(o),c=n("HzJ8"),l=n.n(c),p=n("IHPB"),d=n.n(p),f=n("0xDb"),h=1;function m(e){e.shareImg?e.height="260px":e.height="150px",e.shareImg=e.shareImg.split(","),e.createTime=f.a.dateFromat(e.createTime),e.distance=f.a.getGreatCircleDistance(e.shareLat,e.shareLng),e.distance=window.vueObj.$options.filters.distanceFromat(e.distance)}var v={namespaced:!0,state:{pageSize:20,activeType:"newest",newest:{list:[],page:h,finished:!1},nearby:{list:[],page:h,finished:!1},dynamic:{list:[],page:h,finished:!1},replyMeList:{page:h,pageSize:20,finished:!1,list:[]},dianzanList:{page:h,pageSize:20,finished:!1,list:[]}},mutations:{setList:function(e,t){var n,r=t.type,a=t.isreload,s=t.list,i=!0,o=!1,u=void 0;try{for(var c,p=l()(s);!(i=(c=p.next()).done);i=!0){m(c.value)}}catch(e){o=!0,u=e}finally{try{!i&&p.return&&p.return()}finally{if(o)throw u}}a?(e[r].list=s,e[r].finished=!1,e[r].page=h):(n=e[r].list).push.apply(n,d()(s));e[r].page++,s.length<10&&(e[r].finished=!0)},Like:function(e,t){var n=t.index,r=t.type;e[r].list[n].parse=!0,e[r].list[n].shareLikeCount+=1},setList2:function(e,t){var n,r=t.isreload,a=t.list,s=t.name;r?(e[s].page=0,e[s].finished=!1,e[s].list=a):(e[s].page++,(n=e[s].list).push.apply(n,d()(a)));a.length<e[s].pageSize&&(e[s].finished=!0)},updateList:function(e){var t=!0,n=!1,r=void 0;try{for(var a,s=l()(["nearby","dynamic","newest"]);!(t=(a=s.next()).done);t=!0){var i=a.value,o=!0,u=!1,c=void 0;try{for(var p,d=l()(e[i].list);!(o=(p=d.next()).done);o=!0){var h=p.value;h.distance=f.a.getGreatCircleDistance(h.shareLat,h.shareLng),h.distance=window.vueObj.$options.filters.distanceFromat(h.distance)}}catch(e){u=!0,c=e}finally{try{!o&&d.return&&d.return()}finally{if(u)throw c}}}}catch(e){n=!0,r=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw r}}}},actions:{getlistHelper:function(e,t){var n=this,r=e.commit,a=e.state;return u()(i.a.mark(function e(){var s,o,u,c,l,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=t.isreload,o=t.type,u=t.cb,c=void 0,l=void 0,e.t0=o,e.next="newest"===e.t0?5:"nearby"===e.t0?8:"dynamic"===e.t0?11:14;break;case 5:return c=a.newest.page,l="2",e.abrupt("break",14);case 8:return c=a.nearby.page,l="1",e.abrupt("break",14);case 11:return c=a.dynamic.page,l="2",e.abrupt("break",14);case 14:return s&&(c=h),e.next=17,n._vm.$apihelper.getShearList({lng:n.state.user.lng+"",lat:n.state.user.lat+"",searchType:l,page:c+"",pageSize:a.pageSize+""});case 17:if(p=e.sent){e.next=20;break}return e.abrupt("return");case 20:r("setList",{type:o,isreload:s,list:p.d.shareList}),u&&u();case 22:case"end":return e.stop()}},e,n)}))()},replyMeList:function(e,t){var n=this,r=e.commit,a=e.state;return u()(i.a.mark(function e(){var s,o,u,c,p,d,f,h,m;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.isreload,o=t.cb,e.next=3,n._vm.$apihelper.getReplyMeList({page:a.replyMeList.page+"",pageSize:a.replyMeList.pageSize+""});case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return");case 6:for(c=!0,p=!1,d=void 0,e.prev=9,f=l()(u.d.replyList);!(c=(h=f.next()).done);c=!0)(m=h.value).comment.replies?m.child=!0:m.child=!1,m.share.shareImg=m.share.shareImg.split(","),m.comment.replyTime=n._vm.$utils.dateFromat(m.comment.replyTime),m.comment.replies?m.isChild=!0:m.isChild=!1;e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),p=!0,d=e.t0;case 17:e.prev=17,e.prev=18,!c&&f.return&&f.return();case 20:if(e.prev=20,!p){e.next=23;break}throw d;case 23:return e.finish(20);case 24:return e.finish(17);case 25:r("setList2",{isreload:s,list:u.d.replyList,name:"replyMeList"}),o&&o();case 27:case"end":return e.stop()}},e,n,[[9,13,17,25],[18,,20,24]])}))()},dianzanList:function(e,t){var n=this,r=e.commit,a=e.state;return u()(i.a.mark(function e(){var s,o,u,c,p,d,f,h,m;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.isreload,o=t.cb,e.next=3,n._vm.$apihelper.getLikeMeLogs({page:a.dianzanList.page+"",pageSize:a.dianzanList.pageSize+""});case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return");case 6:for(c=!0,p=!1,d=void 0,e.prev=9,f=l()(u.d.parseList);!(c=(h=f.next()).done);c=!0)(m=h.value).comment?m.isComment=!0:m.isComment=!1;e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),p=!0,d=e.t0;case 17:e.prev=17,e.prev=18,!c&&f.return&&f.return();case 20:if(e.prev=20,!p){e.next=23;break}throw d;case 23:return e.finish(20);case 24:return e.finish(17);case 25:r("setList2",{isreload:s,list:u.d.parseList,name:"dianzanList"}),o&&o();case 27:case"end":return e.stop()}},e,n,[[9,13,17,25],[18,,20,24]])}))()}}};r.default.use(a.a);t.a=new a.a.Store({state:{ajaxUrl:"http://www.wuxfly.com:2019",routerPathC:[],curRoutePath:"/",platform:{isApicloud:navigator.userAgent.toLowerCase().includes("apicloud"),isWx:navigator.userAgent.toLowerCase().includes("micromessenger"),isIos:navigator.userAgent.match(/(iPhone|iPod|iPad);?/i),isAndroid:navigator.userAgent.match(/android/i),isWeb:!navigator.userAgent.toLowerCase().includes("micromessenger")&&!navigator.userAgent.toLowerCase().includes("apicloud")}},mutations:{setRouterCache:function(e,t){var n=t.isback,r=t.val;n?e.routerPathC.pop():e.routerPathC.push(r)},setRoutePath:function(e,t){e.curRoutePath=t}},getters:{},actions:{},modules:{user:{namespaced:!0,state:{islogin:!1,token:"",userId:"",hasLatLng:!1,lat:"",lng:"",userInfo:{country:"中国",province:"广东",city:"深圳",userMail:"",userAvatar:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1551893841562&di=345411edc20bb9c87203881672904900&imgtype=0&src=http%3A%2F%2Fbpic.588ku.com%2Felement_origin_min_pic%2F01%2F31%2F87%2F96573b585a7c9c4.jpg",userName:"洪涛",gender:"0"}},mutations:{LOGIN_SUCCESS:function(e,t){e.islogin=!0,e.token=t.h.token,e.userId=t.h.userId;var n=t.d;for(var r in n)e.userInfo[r]=n[r]}},actions:{}},listHelper:v}})},"q+kZ":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.88d6005622a7c0f60f5e.js.map