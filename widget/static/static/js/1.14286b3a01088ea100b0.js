webpackJsonp([1],{"K/nL":function(e,t){},"ii/w":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("lC5x"),r=a.n(s),i=a("HzJ8"),n=a.n(i),l=a("IHPB"),c=a.n(l),o=a("J0Oq"),p=a.n(o),d=a("VAi0"),u=a("NmBu"),h={components:{replyList:d.a,replyEditBox:u.a},data:function(){return{loading:!1,showReplyBox:!1,finished:!1,tearPlaTxt:"发表评论",page:0,pageSize:20,shareId:"",reList:[],cacheObj:{},replayParObj:{},cIndex:-1,pIndex:-1,parentContent:""}},methods:{getList:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return p()(r.a.mark(function a(){var s,i,l,o,p,d,u,h,v,f,m,y;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=e.$route.query,i=s.shareId,l=s.replyId,a.next=3,e.$apihelper.getReplyDetail({shareId:i,replyId:l,page:e.page+"",pageSize:e.pageSize+""});case 3:if(o=a.sent,e.loading=!1,o){a.next=7;break}return a.abrupt("return");case 7:for(e.page++,p=o.d.replies,o.d.replyTime=e.$utils.dateFromat(o.d.replyTime),e.replayParObj=o.d,e.shareId=o.d.shareId,e.tearPlaTxt="回复"+o.d.userName,p.length<e.pageSize&&(e.finished=!0),d=!0,u=!1,h=void 0,a.prev=17,v=n()(p);!(d=(f=v.next()).done);d=!0)(m=f.value).replyTime=e.$utils.dateFromat(m.replyTime);a.next=25;break;case 21:a.prev=21,a.t0=a.catch(17),u=!0,h=a.t0;case 25:a.prev=25,a.prev=26,!d&&v.return&&v.return();case 28:if(a.prev=28,!u){a.next=31;break}throw h;case 31:return a.finish(28);case 32:return a.finish(25);case 33:t?(e.page=0,e.reList=p):(y=e.reList).push.apply(y,c()(p));case 34:case"end":return a.stop()}},a,e,[[17,21,25,33],[26,,28,32]])}))()},likeClick:function(e){var t=this;return p()(r.a.mark(function a(){var s,i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.reList[e].parse){a.next=2;break}return a.abrupt("return");case 2:return t.reList[e].parse=!0,t.reList[e].praseCount+=1,s=t.reList[e].id,i=t.reList[e].userId,a.next=7,t.$apihelper.parseLikeReplay({shareId:t.shareId,praseUserId:i,commentId:s,type:"B"});case 7:a.sent;case 8:case"end":return a.stop()}},a,t)}))()},replyChildBtn:function(e){var t=e.item,a=e.pIndex,s=e.cIndex;this.parentContent=t.content,this.cIndex=s,this.pIndex=a,this.isReplayChild=!0,this.tearPlaTxt="回复"+t.userName,this.showReplyBox=!0,this.cacheObj={commentId:this.replayParObj.id,shareId:this.shareId,replyUserId:t.userId,replyId:t.id}},removeReply:function(){var e=obj;e.item,e.pIndex,e.cIndex},hidereplyBox:function(){this.showReplyBox=!1,this.textareaBlur()},textareaBlur:function(){this.tearPlaTxt="回复"+this.replayParObj.userName},sumbitReplay:function(e){var t=this;return p()(r.a.mark(function a(){var s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.cacheObj.content=e,a.next=3,t.$apihelper.shareReplyArticleChild(t.cacheObj);case 3:s=a.sent,console.log("回复二级评论",s),s.d.userAvatar=t.$store.state.user.userInfo.userAvatar,s.d.replyTime=t.$utils.dateFromat(s.d.replyTime),s.d.userName=t.$store.state.user.userInfo.userName,s.d.parentContent=t.parentContent,~t.pIndex&&(s.d.repltUserName=t.reList[t.pIndex].userName),t.reList.unshift(s.d),t.hidereplyBox();case 12:case"end":return a.stop()}},a,t)}))()},handlerClick:function(e){var t=this;return{replyBtn:function(){t.cacheObj={commentId:t.replayParObj.id,shareId:t.shareId,replyUserId:t.replayParObj.userId,replyId:t.replayParObj.id},t.showReplyBox=!0}}[e]()},onLoad:function(){this.getList(!1)}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"more-replay"},[a("div",{staticClass:"more-pos"},[a("div",{staticClass:"more-wrap paddingTopNav"},[a("van-nav-bar",{staticClass:"topNavBar",attrs:{title:"回复详情","left-text":"返回","left-arrow":""},on:{"click-left":function(t){return e.$router.back()}}}),e._v(" "),a("div",{staticClass:"re-item"},[a("div",{staticClass:"re-wrap"},[a("div",{staticClass:"left"},[a("img",{staticClass:"ava",attrs:{src:e.replayParObj.userAvatar}})]),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"re-h"},[a("span",{staticClass:"uname"},[a("span",{staticClass:"txt"},[e._v(e._s(e.replayParObj.userName))]),e._v(" "),a("strong",{staticClass:"icon"},[e._v("楼主")])])]),e._v(" "),a("div",{staticClass:"recont"},[e._v(e._s(e.replayParObj.content))]),e._v(" "),a("div",{staticClass:"bottom"},[a("span",{staticClass:"time"},[e._v(e._s(e.replayParObj.replyTime))])])])]),e._v(" "),a("div",{staticClass:"line"})]),e._v(" "),a("div",{staticClass:"line"}),e._v(" "),a("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.reList,function(t,s){return a("replyList",{key:s,attrs:{reItem:t,index:s,isChild:!0,pUserid:e.replayParObj.userId||-1,goType:"mc"},on:{btnClick:e.replyChildBtn,likeClick:e.likeClick,removeReply:e.removeReply}})}),1),e._v(" "),a("replyEditBox",{attrs:{tearPlaTxt:e.tearPlaTxt},on:{"on-submit":e.sumbitReplay},model:{value:e.showReplyBox,callback:function(t){e.showReplyBox=t},expression:"showReplyBox"}}),e._v(" "),a("div",{staticClass:"action-list"},[a("div",{staticClass:"edit",on:{click:function(t){return e.handlerClick("replyBtn")}}},[a("span",{staticClass:"iconfont icon-bianji",staticStyle:{"font-size":"20px"}}),e._v(" "),a("span",[e._v("写评论")])]),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2)]),e._v(" "),a("transition",{attrs:{"enter-active-class":"animated fadeInRight","leave-active-class":"animated fadeOutRight"}},[a("router-view",{staticClass:"app-content",staticStyle:{"z-index":"99"}})],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"action-item"},[t("p",{staticClass:"iconfont icon-xihuancon"}),this._v(" "),t("p",{staticClass:"txt"},[this._v("1")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"action-item"},[t("p",{staticClass:"iconfont icon-pinglun"}),this._v(" "),t("p",{staticClass:"txt"},[this._v("1")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"action-item"},[t("p",{staticClass:"iconfont icon-zhuanfa"}),this._v(" "),t("p",{staticClass:"txt"},[this._v("1")])])}]};var f=a("C7Lr")(h,v,!1,function(e){a("K/nL")},"data-v-7dfc08c0",null);t.default=f.exports}});
//# sourceMappingURL=1.14286b3a01088ea100b0.js.map