webpackJsonp([20],{"2Xen":function(e,t){},DVwZ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("lC5x"),n=r.n(s),a=r("J0Oq"),i=r.n(a),o={data:function(){return{email:"",password:"",sms:"",smsCount:0,timer:null}},methods:{sendSms:function(){var e=this;return i()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$apihelper.getMailSms({userName:"测试用户",userMail:e.email});case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:if(0===e.smsCount){t.next=7;break}return t.abrupt("return");case 7:e.smsCount=60,e.timer=setInterval(function(){if(e.smsCount<=0)return e.smsCount=0,void clearInterval(e.timer);e.smsCount--},1e3);case 9:case"end":return t.stop()}},t,e)}))()},register:function(){var e=this;return i()(n.a.mark(function t(){var r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$apihelper.mailRegister({mail:e.email,nickName:"",password:e.password,code:e.sms,registType:"N"});case 2:if(r=t.sent){t.next=5;break}return t.abrupt("return");case 5:e.$utils.cookie.delete("token"),e.$utils.cookie.set("token",r.h.token,1),e.$utils.cookie.set("userId",r.h.userId,1),e.$store.commit("user/LOGIN_SUCCESS",r.d),e.$router.replace({path:"/home"});case 10:case"end":return t.stop()}},t,e)}))()}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"login"}},[e._m(0),e._v(" "),r("div",{staticClass:"from"},[r("van-cell-group",[r("van-field",{attrs:{required:"",clearable:"",label:"邮箱","right-icon":"question-o",placeholder:"请输入邮箱"},on:{"click-right-icon":function(t){return e.$toast("question")}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),r("van-field",{attrs:{type:"password",label:"密码",placeholder:"请输入密码",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),r("van-field",{attrs:{center:"",clearable:"",label:"验证码",placeholder:"请输入邮箱验证码"},model:{value:e.sms,callback:function(t){e.sms=t},expression:"sms"}},[r("van-button",{attrs:{slot:"button",size:"small",type:"primary"},on:{click:e.sendSms},slot:"button"},[e._v(e._s(e.smsCount?e.smsCount+"秒":"发送验证码"))])],1)],1)],1),e._v(" "),r("div",{staticClass:"btn"},[r("van-button",{staticClass:"btnvant",attrs:{type:"warning"},on:{click:e.register}},[e._v("注册")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("img",{staticClass:"login",attrs:{src:r("j59A")}})])}]};var u=r("C7Lr")(o,l,!1,function(e){r("2Xen")},"data-v-08d22f52",null);t.default=u.exports}});
//# sourceMappingURL=20.cdfdc5a55aabff577ede.js.map