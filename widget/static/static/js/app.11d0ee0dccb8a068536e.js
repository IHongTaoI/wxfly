webpackJsonp([24],{"0xDb":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("2lMm");n("YtJ0");var a={set:function(e,t,n){var r=new Date,a=n;r.setTime(r.getTime()+24*a*3600*1e3),document.cookie=e+"="+t+";expires="+r.toGMTString()},get:function(e){for(var t,n=document.cookie.replace(/[ ]/g,"").split(";"),r=0;r<n.length;r++){var a=n[r].split("=");if(e==a[0]){t=a[1];break}}return t},delete:function(e){var t=new Date;t.setTime(t.getTime()-1e4),document.cookie=e+"=v; expires ="+t.toGMTString()}};t.b={dateFromat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=new Date(e),r=new Date;if(isNaN(n)&&(n=new Date(e.replace(/\\-/g,"/"))),r.getFullYear()===n.getFullYear()){if(r.getMonth()+r.getDate()===n.getMonth()+n.getDate()){var a=Math.floor((r-n)/1e3/60/60),s=Math.floor((r-n)/1e3/60),i=Math.floor((r-n)/1e3);return a<24&&a>0?a+"小时前"+t:a<=0&&s>0?s+"分钟前"+t:s<=0?i>10?i+"秒前"+t:"刚刚":n.getMonth()+1+"-"+n.getDate()}return n.getMonth()+1+"-"+n.getDate()}return n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()},isNull:function(e){return void 0===e||""===e||null===e},imagePreview:function(e,t){Object(r.a)({images:e,startPosition:t})},cookie:a,cache:{homeScrool:0,reMeListScroll:0,dianzanListScroll:0},getGreatCircleDistance:function(e,t,n,r){function a(e){return e*Math.PI/180}var s=a(e),i=a(n),o=s-i,u=a(t)-a(r),c=2*Math.asin(Math.sqrt(Math.pow(Math.sin(o/2),2)+Math.cos(s)*Math.cos(i)*Math.pow(Math.sin(u/2),2)));return c*=6378.137,c=Math.round(1e4*c)/1e4}}},CNLI:function(e,t,n){"use strict";var r=n("lC5x"),a=n.n(r),s=n("J0Oq"),i=n.n(s),o=n("3cXf"),u=n.n(o),c=n("83B7"),l=n("0xDb"),p=n("YtJ0");function d(){var e=l.b.cookie.get("userId");return new WebSocket("ws://134.175.16.212:8764/webSocket?userId="+e)}var h=function(e){return{like:function(t){var n={token:t,message:"like"};e.send(u()(n))}}};function f(){var e;(e=d()).onopen=function(){console.log("socket已经连接")},e.onclose=function(){setTimeout(function(){console.log("socket断开,尝试重连"),f()},3e3)},e.onerror=function(){setTimeout(function(){d()},2e3)},e.onmessage=function(e){var t=JSON.parse(e.data),n={like:function(){},CHAT:function(){c.a.prototype.$notify({message:"您有新的消息",duration:2e3,className:"notify",background:"#1989fa"}),p.a.commit("message/updateMsg",t)}};n[t.msgType]&&n[t.msgType]()},c.a.prototype.$wsHelper=h(e)}t.a=i()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:f();case 1:case"end":return e.stop()}},e,this)}))},Dj7W:function(e,t){},JojC:function(e,t){},M7pd:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("83B7"),a=n("YtJ0"),s=n("lC5x"),i=n.n(s),o=n("J0Oq"),u=n.n(o),c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"main"}},[t("transition",{attrs:{"enter-active-class":"animated fadeInLeft","leave-active-class":"animated fadeOutLeft"}},[t("keep-alive",[this.$route.meta.keepAlive?t("router-view",{staticClass:"app-content"}):this._e()],1)],1),this._v(" "),t("transition",{attrs:{"enter-active-class":"animated fadeInRight","leave-active-class":"animated fadeOutRight"}},[this.$route.meta.keepAlive?this._e():t("div",{staticClass:"app-content"},[t("transition",{attrs:{"enter-active-class":this.enterAnimate,"leave-active-class":this.leaveAnimate}},[t("router-view",{staticClass:"app-content"})],1)],1)])],1)},staticRenderFns:[]};var l=n("C7Lr")({name:"App",data:function(){return{enterAnimate:"",leaveAnimate:""}},created:function(){this.$store.dispatch("common/initRedDot")},computed:{routerPathC:function(){return this.$store.state.routerPathC}},watch:{$route:function(e,t){this.$store.commit("setRoutePath",e.path);var n=["/","/read","/message","self"].includes(e.path);~this.routerPathC.indexOf(e.path)&&e.path===this.routerPathC[this.routerPathC.length-2]||n?(this.enterAnimate="animated fadeInLeft",this.leaveAnimate="animated fadeOutRight",this.$store.commit("setRouterCache",{isback:!0})):(this.$store.commit("setRouterCache",{isback:!1,val:e.path}),this.enterAnimate="animated fadeInRight",this.leaveAnimate="animated fadeOutLeft")}}},c,!1,function(e){n("JojC")},null,null).exports,p=n("KGCO"),d=[{path:"/",redirect:"/home",name:"homeWrap",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"47LJ"))},children:[{path:"/home",name:"home",component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"OC6q"))}},{path:"/read",name:"read",component:function(){return n.e(16).then(n.bind(null,"wfRt"))}},{path:"/message",name:"message",component:function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"Fl22"))}},{path:"/self",name:"self",component:function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"LWnr"))}}]},{path:"/home/shardDetail",name:"分享详情",component:function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,"ANHP"))},children:[{path:"replayDetail",name:"shardDetailReplay",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"ii/w"))}},{path:"moreReplay",name:"moreReplay",component:function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,"kL0G"))},children:[{path:"replayDetail",name:"moreReplayChild",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"ii/w"))}}]}]},{path:"/other/publish",name:"publish",component:function(){return n.e(11).then(n.bind(null,"99Dp"))}},{path:"/self/test",name:"测试页面",component:function(){return n.e(22).then(n.bind(null,"S9lM"))}},{path:"/message/dianzanlist",name:"点赞列表",component:function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,"WPLA"))}},{path:"/message/replay-me-reply",name:"回复我的列表",component:function(){return Promise.all([n.e(0),n.e(19)]).then(n.bind(null,"I++D"))}},{path:"/self/userinfo",name:"个人详情",component:function(){return n.e(17).then(n.bind(null,"QIN8"))},children:[{path:"modify",name:"userinfoModify",component:function(){return n.e(3).then(n.bind(null,"I8NV"))}}]},{path:"/self/setting",name:"设置",component:function(){return n.e(9).then(n.bind(null,"f+6M"))}},{path:"/self/collection",name:"收藏列表",component:function(){return n.e(7).then(n.bind(null,"6SpP"))}},{path:"/self/dynamic",name:"动态",component:function(){return n.e(18).then(n.bind(null,"suLQ"))}},{path:"/aboutMe",name:"关于我们",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"uSFO"))}},{path:"/dialog",name:"dialog",component:function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,"wc/q"))}},{path:"/login",name:"login",component:function(){return Promise.all([n.e(0),n.e(15)]).then(n.bind(null,"ktRq"))}},{path:"/register",name:"register",component:function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,"DVwZ"))}},{path:"/test",name:"test",component:function(){return n.e(5).then(n.bind(null,"Qfpc"))}}],h=n("0xDb"),f=void 0,m=void 0,v=function(e){api.addEventListener({name:"keyback"},function(t,n){e&&e(t,n)})},g=function(e){f=e},w=function(e){m=e};a.a.state.platform.isWeb&&(window.onfocus=function(){m&&m(),m=null},window.onblur=function(){f&&f(),f=null});var b=function(){api.confirm({title:"确定要退出app吗？",buttons:["确定","取消"]},function(e,t){1==e.buttonIndex&&api.closeWidget({silent:!0})})},y=function(){api.removeEventListener({name:"keyback"})};r.a.use(p.a);var x=new p.a({routes:d});x.beforeEach(function(e,t,n){var r=h.b.cookie.get("token");if(r||"login"===e.name||"register"===e.name)if(!r||"login"!==e.name&&"register"!==e.name){["/","/home","/self","/read","/message"].includes(e.path)?a.a.state.platform.isApicloud?v(function(){b()}):(window.history.pushState("forward",null,document.URL),window.onpopstate=function(){window.history.pushState("forward",null,document.URL),window.history.forward(1)}):a.a.state.platform.isApicloud?y():window.onpopstate=null,n()}else x.push({name:"home"});else x.push({name:"login"})});var k,L=x,C=n("aA9S"),I=n.n(C),A=n("aozt"),S=n.n(A),M=(k=u()(i.a.mark(function e(t){var n,r,a=t.url,s=t.data,o=void 0===s?{}:s,u=t.config,c=void 0===u?{files:!1}:u,l=t.sheader,p=void 0===l?{}:l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.files||(n={token:h.b.cookie.get("token"),userId:h.b.cookie.get("userId")},n=I()(n,p),o={serviceHeader:n,serviceBody:o}),e.next=3,S.a.post(a,o,c);case 3:if(!(r=e.sent)){e.next=6;break}return e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)})),function(e){return k.apply(this,arguments)});S.a.defaults.baseURL=a.a.state.ajaxUrl,S.a.defaults.showLoading=!0,S.a.defaults.showErr=!0,S.a.defaults.timeout=3e4;var _=function(e){r.a.prototype.$notify({message:e,className:"notify"})},$=function(e){if(r.a.prototype.$toast.clear(),"ECONNABORTED"===e.code&&-1!==e.message.indexOf("timeout"))return e.config.showErr&&_("请求超时");var t=e.response.data.msg||"请求失败";e.config.showErr&&_(t)};S.a.interceptors.request.use(function(e){return e.showLoading&&r.a.prototype.$toast.loading({mask:!1,message:"加载中...",duration:0}),e},$),S.a.interceptors.response.use(function(e){r.a.prototype.$toast.clear();var t=e.data;return"200000"===t.status?!t.data||!t.data.serviceHeader||{h:t.data.serviceHeader,d:t.data.serviceBody}:"500004"===t.status?(h.b.cookie.delete("token"),_("登录过期，请重新登录"),void setTimeout(function(){L.replace({path:"login"})},200)):(e.config.showErr&&r.a.prototype.$notify(t.msg),!1)},$);var D=S.a,P=n("3khs"),R=n.n(P),T=function(){var e=u()(i.a.mark(function e(t,n,r){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M({url:"/search/share/byId",data:{userId:t,page:n,pageSize:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),O={getShearList:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/search/share/list",data:e,config:{showLoading:!1,showErr:!1}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getShardDetail:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/user/share/init",config:{showLoading:!1},data:{shareId:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},shareReplyAll:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/user/share/reply/all",data:e,config:{showLoading:!1}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},userCollect:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/user/collect",data:{shardId:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},shareReplyArticle:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/user/share/reply/article",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getReplyDetail:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/user/share/reply/desc",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},shareReplyArticleChild:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/user/share/reply/article/child",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getMailSms:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/user/share/mail/activate",data:e,config:{headers:{login:"login"}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},mailRegister:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/user/share/mail/register",data:e,config:{headers:{login:"login"}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},mailLogin:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/user/share/mail/login",data:e,config:{headers:{login:"login"}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},sendShare:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/user/share/send",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},uploadImg:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/admin/upload/img/",data:e,config:{showLoading:!1,files:!0,headers:{"Content-Type":"multipart/form-data",login:"login",token:a.a.state.user.token,userId:a.a.state.user.userId}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getCollectionList:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/user/collect/list",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},delectCollection:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/user/collect/delect",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},outLogin:function(){var e=this;return u()(i.a.mark(function t(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M({url:"/user/share/cencel",config:{headers:{login:"login"}}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}))()},delectShare:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/user/share/del",data:{shareId:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},parseLikeShare:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/user/parse/share",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},parseLikeReplay:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/user/parse/reply",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getReplyMeList:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/search/reply/list",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getLikeMeLogs:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/search/parse/list",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},editUserInfo:function(e,t){var n=this;return u()(i.a.mark(function r(){var s,o,u,c,l,p;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=a.a.state.user.userInfo,o=s.userName,u=s.gender,c=s.addRess,l=s.userAvatar,(p={userName:o,gender:u,addRess:c,avatar:l})[e]=t,n.next=5,M({url:"/user/info/edit",data:p});case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}},r,n)}))()},getUserInfo:function(e){var t=this;return u()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M({url:"/search/userInfo",data:{token:e,loginType:"N"},config:{headers:{login:"login"}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},delReply:function(e,t){var n=this;return u()(i.a.mark(function r(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,M({url:"/user/share/reply/del",data:{replyId:e,replyType:t}});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},r,n)}))()},sendSocketMsg:function(e,t){var n=this;return u()(i.a.mark(function r(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,M({url:"/push/socket",data:{msgType:e,socketMsg:t}});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},r,n)}))()},getuserInfoShear:T},N=n("2lMm"),E=(n("Dj7W"),n("CNLI")),F={container:{overflowY:"scroll",width:"100%",height:"100%"}},z=0,U=0,H={name:"vue-virtual-Infinite-list",props:{defaultHeight:{type:Number,default:200},tobottom:void 0},data:function(){return{heights:[],offset:0,scrollTop:0}},methods:{onscroll:function(e,t){this.$emit("onscroll",e,t)}},mounted:function(){var e=this.$refs.container,t=this;e&&(e.onscroll=function(){t.scrollTop=this.scrollTop||0,t.onscroll(this,{offset:this.scrollTop}),0===U&&t.$emit("tobottom")})},render:function(e){var t=this,n=this.$slots.default;if(n){var r=[],a=this.defaultHeight,s=this.scrollTop,i=this.heights;z=0,U=0;var o=0,u=0;for(Array.prototype.forEach.call(n,function(e,n){var r=n,a=0;e.data&&e.data.style&&e.data.style.height&&(a=parseInt(e.data.style.height)),t.heights[r]||(t.heights[r]=a)});i.length;){var c=i[u]||a;if(o+c>s-700)break;u+=1,o+=c}z=o;for(var l=u+13;u<l;u++)r.push(n[u]);for(;u<n.length;u+=1)U+=i[u]||a;return e("div",{ref:"container",style:[F.container]},[e("div",{style:[{paddingTop:z+"px",paddingBottom:U+"px"}]},r)])}}},j=n("Yr0d"),B=n("rVsN"),J=n.n(B),q=n("hRKE"),W=n.n(q),G={components:{loadinganite:j.a},data:function(){return{show:!1,loading:!0,list:[],animiteEnt:"animated bounceIn",animateLev:"animated bounceOut"}},props:{userava:{type:String,default:""},username:{type:String,default:""},userid:{type:String,default:""}},methods:{close:function(){this.animateLev="animated bounceOut",this.show=!1,this.$emit("input",!1)},close2:function(){this.animateLev="",this.show=!1,this.$emit("input",!1)},gotoDiloag:function(){this.close2(),console.log("去私聊页面"),window.vueObj.$router.push({name:"dialog",params:{username:this.username,userId:this.userid,userava:this.userava}})},getShear:function(){var e=this;return u()(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.userid),t.next=3,T(e.userid,1,10);case 3:n=t.sent,e.list=n.d.shares,e.loading=!1;case 6:case"end":return t.stop()}},t,e)}))()}},watch:{show:function(e){e&&this.getShear()}}},Y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wx-info"},[n("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"mask",on:{click:e.close}})]),e._v(" "),n("transition",{attrs:{"enter-active-class":e.animiteEnt,"leave-active-class":e.animateLev}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"wrap"},[n("span",{staticClass:"closeBnt iconfont icon-guanbi",on:{click:e.close}}),e._v(" "),n("img",{staticClass:"userAva",attrs:{src:e.userava,alt:""}}),e._v(" "),n("p",{staticClass:"username"},[e._v(e._s(e.username))]),e._v(" "),n("van-button",{staticClass:"msgBtn",attrs:{type:"info"},on:{click:e.gotoDiloag}},[e._v("私聊")]),e._v(" "),n("div",{staticClass:"content"},[n("h3",{staticClass:"title"},[e._v("他的动态")]),e._v(" "),n("div",{staticClass:"cont"},[n("loadinganite",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]}),e._v(" "),e._l(e.list,function(t,r){return n("div",{key:r,staticClass:"shearItem"},[e._v(e._s(t.shareContent))])})],2)])],1)])],1)},staticRenderFns:[]};var K,Q,V=n("C7Lr")(G,Y,!1,function(e){n("wuOq")},"data-v-20380aae",null).exports,Z=void 0,X=void 0,ee={install:function(e){var t=e.extend(V);Z||(Z=new t({el:document.createElement("div")}),document.body.appendChild(Z.$el));var n={show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==(void 0===e?"undefined":W()(e)))throw new Error("参数options不是一个有效的JSON");X&&X(),function(e,t){var n={};for(var r in e.$options.props)"value"!==r&&(n[r]=e.$options.props[r].default);var a=I()({},n,t);for(var s in a)e[s]=a[s]}(Z,e),e.onHide&&(X=Z.$watch("show",function(t){!1===t&&e.onHide&&e.onHide(Z)})),Z.show=!0},hide:function(){Z.show=!1}};e.$wechat?e.$myplug.info=n:e.$myplug={info:n},e.mixin({created:function(){this.$myplug=e.$myplug}})}},te=ee,ne=function(){String.prototype.gblen=function(){for(var e=0,t=0;t<this.length;t++)this.charCodeAt(t)>127||94==this.charCodeAt(t)?e+=2:e++;return e},r.a.use(R.a,D),r.a.use(N.c),r.a.use(N.b),r.a.use(te),r.a.component("auto-virtual-list",H),r.a.component("loadinganite",j.a),r.a.prototype.$BMap=function(){var e=document.createElement("div"),t=new BMap.Map(e),n=new BMap.Point(116.331398,39.897445);t.centerAndZoom(n,12);var r=new BMap.Geolocation;function s(){return new J.a(function(e,t){r.enableSDKLocation(),r.getCurrentPosition(function(t){if(this.getStatus()==BMAP_STATUS_SUCCESS){var n={lng:t.point.lng,lat:t.point.lat};a.a.commit("user/UPDATE_LOCATION",n),e(n)}else e(!1)})})}return s().then(function(e){e||console.log("获取地理位置失败"),console.log("获取地理位置成功",e),a.a.commit("user/UPDATE_LOCATION",e),a.a.commit("listHelper/updateList")}),{getPosition:s}}(),r.a.prototype.$utils=h.b,r.a.prototype.$apihelper=O,r.a.config.productionTip=!1,window.vueObj=new r.a({el:"#app",router:L,components:{App:l},store:a.a,template:"<App/>",beforeCreate:function(){var e=this;return u()(i.a.mark(function t(){var n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=h.b.cookie.get("token"),r=h.b.cookie.get("userId"),n&&r?(a.a.dispatch("user/login_success",n),Object(E.a)()):e.$router.replace({path:"/login"});case 3:case"end":return t.stop()}},t,e)}))()}})},re=(n("nuyN"),n("ZLEe")),ae=n.n(re),se={countFromat:function(e){return e<1e3?e:e>1e3?(e/1e3).toFixed(1)+"k":e>1e6?(e/1e6).toFixed(1)+"m":void 0},distanceFromat:function(e){return e<1?parseInt(1e3*e)+"米":Math.ceil(e)+"公里"}},ie=n("iDdd");n.n(ie).a.attach(document.body),K=r.a,ae()(se).forEach(function(e){K.filter(e,se[e])}),a.a.state.platform.isApicloud?window.apiready=(Q=ne,function(){r.a.prototype.$native={listenerKeyback:v,removeListenKeyback:y,exitApp:b,setPause:g,setResume:w},Q()}):ne()},Yr0d:function(e,t,n){"use strict";var r={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"loading-adminte"}},[t("div",{staticClass:"d"},[t("span",{staticClass:"s"})]),this._v(" "),t("div",{staticClass:"d"},[t("span",{staticClass:"s"})]),this._v(" "),t("div",{staticClass:"d"},[t("span",{staticClass:"s"})])])}]};var a=n("C7Lr")({},r,!1,function(e){n("M7pd")},"data-v-a59423f6",null);t.a=a.exports},YtJ0:function(e,t,n){"use strict";var r=n("83B7"),a=n("R4Sj"),s=n("lC5x"),i=n.n(s),o=n("J0Oq"),u=n.n(o),c=n("0xDb"),l={namespaced:!0,state:{islogin:!1,token:c.a.get("token"),userId:"",hasLatLng:!1,lat:"",lng:"",userInfo:{country:"中国",province:"广东",city:"深圳",userMail:"",userAvatar:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1551893841562&di=345411edc20bb9c87203881672904900&imgtype=0&src=http%3A%2F%2Fbpic.588ku.com%2Felement_origin_min_pic%2F01%2F31%2F87%2F96573b585a7c9c4.jpg",userName:"洪涛",gender:"0",addRess:""}},mutations:{LOGIN_SUCCESS:function(e,t){for(var n in e.islogin=!0,t)"id"===n&&(e.userId=t[n]),e.userInfo[n]=t[n]},UPDATE_USERDATA:function(e,t){for(var n in t)"id"===n&&(e.userId=t[n]),e.userInfo[n]=t[n]},UPDATE_LOCATION:function(e,t){e.lat=t.lat,e.lng=t.lng,e.hasLatLng=!0}},actions:{login_success:function(e,t){var n=this,r=e.commit;return u()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._vm.$apihelper.getUserInfo(t);case 2:a=e.sent,r("LOGIN_SUCCESS",a.d);case 4:case"end":return e.stop()}},e,n)}))()}}},p=n("HzJ8"),d=n.n(p),h=n("IHPB"),f=n.n(h),m=1;function v(e,t,n){e.shareImg?e.height="260px":e.height="150px",e.shareImg=e.shareImg.split(","),e.createTime=c.b.dateFromat(e.createTime),e.distance=c.b.getGreatCircleDistance(t,n,e.shareLat,e.shareLng),e.distance=window.vueObj.$options.filters.distanceFromat(e.distance)}var g={namespaced:!0,state:{pageSize:20,activeType:"newest",newest:{list:[],page:m,finished:!1},nearby:{list:[],page:m,finished:!1},dynamic:{list:[],page:m,finished:!1},replyMeList:{page:m,pageSize:20,finished:!1,list:[]},dianzanList:{page:m,pageSize:20,finished:!1,list:[]}},mutations:{setList:function(e,t){var n,r=t.type,a=t.isreload,s=t.list,i=this.state.user.lat,o=this.state.user.lng,u=!0,c=!1,l=void 0;try{for(var p,h=d()(s);!(u=(p=h.next()).done);u=!0){v(p.value,i,o)}}catch(e){c=!0,l=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw l}}a?(e[r].list=s,e[r].finished=!1,e[r].page=m):(n=e[r].list).push.apply(n,f()(s));e[r].page++,s.length<10&&(e[r].finished=!0)},Like:function(e,t){var n=t.index,r=t.type;e[r].list[n].parse=!0,e[r].list[n].shareLikeCount+=1},setList2:function(e,t){var n,r=t.isreload,a=t.list,s=t.name;r?(e[s].page=0,e[s].finished=!1,e[s].list=a):(e[s].page++,(n=e[s].list).push.apply(n,f()(a)));a.length<e[s].pageSize&&(e[s].finished=!0)},updateList:function(e){var t=!0,n=!1,r=void 0;try{for(var a,s=d()(["nearby","dynamic","newest"]);!(t=(a=s.next()).done);t=!0){var i=a.value,o=!0,u=!1,l=void 0;try{for(var p,h=d()(e[i].list);!(o=(p=h.next()).done);o=!0){var f=p.value,m=this.state.user.lat,v=this.state.user.lng;f.distance=c.b.getGreatCircleDistance(m,v,f.shareLat,f.shareLng),f.distance=window.vueObj.$options.filters.distanceFromat(f.distance)}}catch(e){u=!0,l=e}finally{try{!o&&h.return&&h.return()}finally{if(u)throw l}}}}catch(e){n=!0,r=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw r}}}},actions:{getlistHelper:function(e,t){var n=this,r=e.commit,a=e.state;return u()(i.a.mark(function e(){var s,o,u,c,l,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=t.isreload,o=t.type,u=t.cb,c=void 0,l=void 0,e.t0=o,e.next="newest"===e.t0?5:"nearby"===e.t0?8:"dynamic"===e.t0?11:14;break;case 5:return c=a.newest.page,l="2",e.abrupt("break",14);case 8:return c=a.nearby.page,l="1",e.abrupt("break",14);case 11:return c=a.dynamic.page,l="2",e.abrupt("break",14);case 14:return s&&(c=m),e.next=17,n._vm.$apihelper.getShearList({lng:n.state.user.lng+"",lat:n.state.user.lat+"",searchType:l,page:c+"",pageSize:a.pageSize+""});case 17:if(p=e.sent){e.next=20;break}return e.abrupt("return");case 20:r("setList",{type:o,isreload:s,list:p.d.shareList}),u&&u();case 22:case"end":return e.stop()}},e,n)}))()},replyMeList:function(e,t){var n=this,r=e.commit,a=e.state;return u()(i.a.mark(function e(){var s,o,u,c,l,p,h,f,m;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.isreload,o=t.cb,e.next=3,n._vm.$apihelper.getReplyMeList({page:a.replyMeList.page+"",pageSize:a.replyMeList.pageSize+""});case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return");case 6:for(c=!0,l=!1,p=void 0,e.prev=9,h=d()(u.d.replyList);!(c=(f=h.next()).done);c=!0)(m=f.value).comment.replies?m.child=!0:m.child=!1,m.share.shareImg=m.share.shareImg.split(","),m.comment.replyTime=n._vm.$utils.dateFromat(m.comment.replyTime),m.comment.replies?m.isChild=!0:m.isChild=!1;e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),l=!0,p=e.t0;case 17:e.prev=17,e.prev=18,!c&&h.return&&h.return();case 20:if(e.prev=20,!l){e.next=23;break}throw p;case 23:return e.finish(20);case 24:return e.finish(17);case 25:r("setList2",{isreload:s,list:u.d.replyList,name:"replyMeList"}),o&&o();case 27:case"end":return e.stop()}},e,n,[[9,13,17,25],[18,,20,24]])}))()},dianzanList:function(e,t){var n=this,r=e.commit,a=e.state;return u()(i.a.mark(function e(){var s,o,u,c,l,p,h,f,m;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.isreload,o=t.cb,e.next=3,n._vm.$apihelper.getLikeMeLogs({page:a.dianzanList.page+"",pageSize:a.dianzanList.pageSize+""});case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return",o&&o(!1));case 6:for(c=!0,l=!1,p=void 0,e.prev=9,h=d()(u.d.parseList);!(c=(f=h.next()).done);c=!0)(m=f.value).comment?m.isComment=!0:m.isComment=!1;e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),l=!0,p=e.t0;case 17:e.prev=17,e.prev=18,!c&&h.return&&h.return();case 20:if(e.prev=20,!l){e.next=23;break}throw p;case 23:return e.finish(20);case 24:return e.finish(17);case 25:r("setList2",{isreload:s,list:u.d.parseList,name:"dianzanList"}),o&&o();case 27:case"end":return e.stop()}},e,n,[[9,13,17,25],[18,,20,24]])}))()}}};r.a.use(a.a);t.a=new a.a.Store({state:{ajaxUrl:"http://www.wuxfly.com:2019",routerPathC:[],curRoutePath:"/",platform:{isApicloud:navigator.userAgent.toLowerCase().includes("apicloud"),isWx:navigator.userAgent.toLowerCase().includes("micromessenger"),isIos:navigator.userAgent.match(/(iPhone|iPod|iPad);?/i),isAndroid:navigator.userAgent.match(/android/i),isWeb:!navigator.userAgent.toLowerCase().includes("micromessenger")&&!navigator.userAgent.toLowerCase().includes("apicloud")}},mutations:{setRouterCache:function(e,t){var n=t.isback,r=t.val;n?e.routerPathC.pop():e.routerPathC.push(r)},setRoutePath:function(e,t){e.curRoutePath=t}},getters:{},actions:{},modules:{user:l,listHelper:g,common:{namespaced:!0,state:{redDot:{self:!1,downloadApp:!1}},mutations:{INITREDDOT:function(e,t){for(var n in t)e.redDot[n]=t[n]}},actions:{initRedDot:function(e){var t=e.commit,n=!1,r=!1;this.state.platform.isWeb&&this.state.platform.isAndroid&&(r=!0),r&&(n=!0),t("INITREDDOT",{self:n,downloadApp:r})}}},message:{namespaced:!0,state:{dialogList:[],sessionId:-1},mutations:{updateMsg:function(e,t){var n=e.dialogList.findIndex(function(e){return e.id===t.id});~n?e.dialogList[n].msgList.push(t.msg):e.dialogList.push({userId:t.fromUser.id,username:t.fromUser.userName,userAvatar:t.fromUser.userAvatar,msgList:[t.msg]})}},actions:{}}}})},wuOq:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.11d0ee0dccb8a068536e.js.map