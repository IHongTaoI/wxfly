webpackJsonp([23],{"0xDb":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("2lMm"),a=n("YtJ0");var i={set:function(e,t,n){var r=new Date,a=n;r.setTime(r.getTime()+24*a*3600*1e3),document.cookie=e+"="+t+";expires="+r.toGMTString()},get:function(e){for(var t,n=document.cookie.replace(/[ ]/g,"").split(";"),r=0;r<n.length;r++){var a=n[r].split("=");if(e==a[0]){t=a[1];break}}return t},delete:function(e){var t=new Date;t.setTime(t.getTime()-1e4),document.cookie=e+"=v; expires ="+t.toGMTString()}};t.b={dateFromat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=new Date(e),r=new Date;if(isNaN(n)&&(n=new Date(e.replace(/\\-/g,"/"))),r.getFullYear()===n.getFullYear()){if(r.getMonth()+r.getDate()===n.getMonth()+n.getDate()){var a=Math.floor((r-n)/1e3/60/60),i=Math.floor((r-n)/1e3/60),s=Math.floor((r-n)/1e3);return a<24&&a>0?a+"小时前"+t:a<=0&&i>0?i+"分钟前"+t:i<=0?s>10?s+"秒前"+t:"刚刚":n.getMonth()+1+"-"+n.getDate()}return n.getMonth()+1+"-"+n.getDate()}return n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()},isNull:function(e){return void 0===e||""===e||null===e},imagePreview:function(e,t){Object(r.a)({images:e,startPosition:t})},cookie:i,cache:{homeScrool:0,reMeListScroll:0,dianzanListScroll:0},getGreatCircleDistance:function(e,t){var n=a.a.state.user.lat*Math.PI/180,r=e*Math.PI/180,i=n-r,s=a.a.state.user.lng*Math.PI/180-t*Math.PI/180,o=2*Math.asin(Math.sqrt(Math.pow(Math.sin(i/2),2)+Math.cos(n)*Math.cos(r)*Math.pow(Math.sin(s/2),2)));return o*=6378.137,o=Math.round(1e4*o)/1e4}}},CNLI:function(e,t,n){"use strict";var r=n("lC5x"),a=n.n(r),i=n("J0Oq"),s=n.n(i),o=n("3cXf"),u=n.n(o),c=n("83B7"),l=n("0xDb");function p(){var e=l.b.cookie.get("token");return new WebSocket("ws://134.175.16.212:2019/webSocket?token="+e)}var d=function(e){return{like:function(t){var n={token:t,message:"like"};e.send(u()(n))}}};t.a=s()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=p()).onopen=function(){console.log("socket已经连接")},t.onclose=function(){console.log("socket断开")},t.onerror=function(){setTimeout(function(){p()},2e3)},t.onmessage=function(e){switch(e.data){case"like":c.a.prototype.$notify({message:"有人给你点赞了",duration:2e3,className:"notify",background:"#1989fa"})}},c.a.prototype.$wsHelper=d(t),e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)}))},Dj7W:function(e,t){},M7pd:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("83B7"),a=n("YtJ0"),i=n("lC5x"),s=n.n(i),o=n("J0Oq"),u=n.n(o),c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"main"}},[t("transition",{attrs:{"enter-active-class":"animated fadeInLeft","leave-active-class":"animated fadeOutLeft"}},[t("keep-alive",[this.$route.meta.keepAlive?t("router-view",{staticClass:"app-content"}):this._e()],1)],1),this._v(" "),t("transition",{attrs:{"enter-active-class":"animated fadeInRight","leave-active-class":"animated fadeOutRight"}},[this.$route.meta.keepAlive?this._e():t("div",{staticClass:"app-content"},[t("transition",{attrs:{"enter-active-class":this.enterAnimate,"leave-active-class":this.leaveAnimate}},[t("router-view",{staticClass:"app-content"})],1)],1)])],1)},staticRenderFns:[]};var l=n("C7Lr")({name:"App",data:function(){return{enterAnimate:"",leaveAnimate:""}},computed:{routerPathC:function(){return this.$store.state.routerPathC}},watch:{$route:function(e,t){this.$store.commit("setRoutePath",e.path);var n=["/","/read","/message","self"].includes(e.path);~this.routerPathC.indexOf(e.path)&&e.path===this.routerPathC[this.routerPathC.length-2]||n?(this.enterAnimate="animated fadeInLeft",this.leaveAnimate="animated fadeOutRight",this.$store.commit("setRouterCache",{isback:!0})):(this.$store.commit("setRouterCache",{isback:!1,val:e.path}),this.enterAnimate="animated fadeInRight",this.leaveAnimate="animated fadeOutLeft")}}},c,!1,function(e){n("q+kZ")},null,null).exports,p=n("KGCO"),d=[{path:"/",redirect:"/home",name:"homeWrap",component:function(){return n.e(2).then(n.bind(null,"47LJ"))},children:[{path:"/home",name:"home",component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"OC6q"))}},{path:"/read",name:"read",component:function(){return n.e(16).then(n.bind(null,"wfRt"))}},{path:"/message",name:"message",component:function(){return n.e(5).then(n.bind(null,"Fl22"))}},{path:"/self",name:"self",component:function(){return Promise.all([n.e(0),n.e(17)]).then(n.bind(null,"LWnr"))}}]},{path:"/home/shardDetail",name:"分享详情",component:function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,"ANHP"))},children:[{path:"replayDetail",name:"shardDetailReplay",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"ii/w"))}},{path:"moreReplay",name:"moreReplay",component:function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,"kL0G"))},children:[{path:"replayDetail",name:"moreReplayChild",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"ii/w"))}}]}]},{path:"/other/publish",name:"publish",component:function(){return n.e(13).then(n.bind(null,"99Dp"))}},{path:"/self/test",name:"测试页面",component:function(){return n.e(11).then(n.bind(null,"S9lM"))}},{path:"/message/dianzanlist",name:"点赞列表",component:function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,"WPLA"))}},{path:"/message/replay-me-reply",name:"回复我的列表",component:function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,"I++D"))}},{path:"/self/userinfo",name:"个人详情",component:function(){return n.e(18).then(n.bind(null,"QIN8"))},children:[{path:"modify",name:"userinfoModify",component:function(){return n.e(3).then(n.bind(null,"I8NV"))}}]},{path:"/self/setting",name:"设置",component:function(){return n.e(9).then(n.bind(null,"f+6M"))}},{path:"/self/collection",name:"收藏列表",component:function(){return n.e(8).then(n.bind(null,"6SpP"))}},{path:"/self/dynamic",name:"动态",component:function(){return n.e(19).then(n.bind(null,"suLQ"))}},{path:"/aboutMe",name:"关于我们",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"uSFO"))}},{path:"/login",name:"login",component:function(){return Promise.all([n.e(0),n.e(15)]).then(n.bind(null,"ktRq"))}},{path:"/register",name:"register",component:function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"DVwZ"))}},{path:"/test",name:"test",component:function(){return n.e(7).then(n.bind(null,"Qfpc"))}}],f=n("0xDb"),h=void 0,m=void 0,g=function(e){api.addEventListener({name:"keyback"},function(t,n){e&&e(t,n)})},v=function(e){h=e},w=function(e){m=e};a.a.state.platform.isWeb&&(window.onfocus=function(){m&&m(),m=null},window.onblur=function(){h&&h(),h=null});var b=function(){api.confirm({title:"确定要退出app吗？",buttons:["确定","取消"]},function(e,t){1==e.buttonIndex&&api.closeWidget({silent:!0})})},y=function(){api.removeEventListener({name:"keyback"})};r.a.use(p.a);var k=new p.a({routes:d});k.beforeEach(function(e,t,n){var r=f.b.cookie.get("token"),i=f.b.cookie.get("userId");if(r&&i||"login"===e.name||"register"===e.name)if(r&&!i||"login"!==e.name&&"register"!==e.name){["/","/home","/self","/read","/message"].includes(e.path)?a.a.state.platform.isApicloud?g(function(){b()}):(window.history.pushState("forward",null,document.URL),window.onpopstate=function(){window.history.pushState("forward",null,document.URL),window.history.forward(1)}):a.a.state.platform.isApicloud?y():window.onpopstate=null,n()}else k.push({name:"home"});else k.push({name:"login"})});var x,L=k,C=n("aA9S"),I=n.n(C),M=n("aozt"),A=n.n(M),S=(x=u()(s.a.mark(function e(t){var n,r,a=t.url,i=t.data,o=void 0===i?{}:i,u=t.config,c=void 0===u?{files:!1}:u,l=t.sheader,p=void 0===l?{}:l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.files||(n={token:f.b.cookie.get("token"),userId:f.b.cookie.get("userId")},n=I()(n,p),o={serviceHeader:n,serviceBody:o}),e.next=3,A.a.post(a,o,c);case 3:if(!(r=e.sent)){e.next=6;break}return e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)})),function(e){return x.apply(this,arguments)});A.a.defaults.baseURL=a.a.state.ajaxUrl,A.a.defaults.showLoading=!0,A.a.defaults.showErr=!0,A.a.defaults.timeout=3e4;var P=function(e){r.a.prototype.$notify({message:e,className:"notify"})},R=function(e){if(r.a.prototype.$toast.clear(),"ECONNABORTED"===e.code&&-1!==e.message.indexOf("timeout"))return e.config.showErr&&P("请求超时");var t=e.response.data.msg||"请求失败";e.config.showErr&&P(t)};A.a.interceptors.request.use(function(e){return e.showLoading&&r.a.prototype.$toast.loading({mask:!1,message:"加载中...",duration:0}),e},R),A.a.interceptors.response.use(function(e){r.a.prototype.$toast.clear();var t=e.data;return"200000"===t.status?!t.data||!t.data.serviceHeader||{h:t.data.serviceHeader,d:t.data.serviceBody}:"500004"===t.status?(f.b.cookie.delete("token"),P("登录过期，请重新登录"),void setTimeout(function(){L.replace({path:"login"})},200)):(e.config.showErr&&r.a.prototype.$notify(t.msg),!1)},R);var D,T,$=A.a,_=n("3khs"),O=n.n(_),N={getShearList:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/search/share/list",data:e,config:{showLoading:!1,showErr:!1}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getShardDetail:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/user/share/init",config:{showLoading:!1},data:{shareId:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},shareReplyAll:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/user/share/reply/all",data:e,config:{showLoading:!1}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},userCollect:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/user/collect",data:{shardId:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},shareReplyArticle:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/user/share/reply/article",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getReplyDetail:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/user/share/reply/desc",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},shareReplyArticleChild:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/user/share/reply/article/child",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getMailSms:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/user/share/mail/activate",data:e,config:{headers:{login:"login"}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},mailRegister:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/user/share/mail/register",data:e,config:{headers:{login:"login"}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},mailLogin:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/user/share/mail/login",data:e,config:{headers:{login:"login"}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},sendShare:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/user/share/send",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},uploadImg:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/admin/upload/img/",data:e,config:{showLoading:!1,files:!0,headers:{"Content-Type":"multipart/form-data",login:"login",token:a.a.state.user.token,userId:a.a.state.user.userId}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getCollectionList:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/user/collect/list",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},delectCollection:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/user/collect/delect",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},outLogin:function(){var e=this;return u()(s.a.mark(function t(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({url:"/user/share/cencel",config:{headers:{login:"login"}}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}))()},delectShare:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/user/share/del",data:{shareId:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},parseLikeShare:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/user/parse/share",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},parseLikeReplay:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/user/parse/reply",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getReplyMeList:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/search/reply/list",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},getLikeMeLogs:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/search/parse/list",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},editUserInfo:function(e,t){var n=this;return u()(s.a.mark(function r(){var i,o,u,c,l,p;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=a.a.state.user.userInfo,o=i.userName,u=i.gender,c=i.addRess,l=i.userAvatar,(p={userName:o,gender:u,addRess:c,avatar:l})[e]=t,n.next=5,S({url:"/user/info/edit",data:p});case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}},r,n)}))()},getUserInfo:function(e){var t=this;return u()(s.a.mark(function n(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({url:"/search/userInfo",data:{token:e,loginType:"N"},config:{headers:{login:"login"}}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n,t)}))()},delReply:function(e,t){var n=this;return u()(s.a.mark(function r(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,S({url:"/user/share/reply/del",data:{replyId:e,replyType:t}});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},r,n)}))()}},E=n("2lMm"),F=(n("Dj7W"),n("CNLI")),z={container:{overflowY:"scroll",width:"100%",height:"100%"}},U=0,H=0,B={name:"vue-virtual-Infinite-list",props:{defaultHeight:{type:Number,default:200},tobottom:void 0},data:function(){return{heights:[],offset:0,scrollTop:0}},methods:{onscroll:function(e,t){this.$emit("onscroll",e,t)}},mounted:function(){var e=this.$refs.container,t=this;e&&(e.onscroll=function(){t.scrollTop=this.scrollTop||0,t.onscroll(this,{offset:this.scrollTop}),0===H&&t.$emit("tobottom")})},render:function(e){var t=this,n=this.$slots.default;if(n){var r=[],a=this.defaultHeight,i=this.scrollTop,s=this.heights;U=0,H=0;var o=0,u=0;for(Array.prototype.forEach.call(n,function(e,n){var r=n,a=0;e.data&&e.data.style&&e.data.style.height&&(a=parseInt(e.data.style.height)),t.heights[r]||(t.heights[r]=a)});s.length;){var c=s[u]||a;if(o+c>i-700)break;u+=1,o+=c}U=o;for(var l=u+13;u<l;u++)r.push(n[u]);for(;u<n.length;u+=1)H+=s[u]||a;return e("div",{ref:"container",style:[z.container]},[e("div",{style:[{paddingTop:U+"px",paddingBottom:H+"px"}]},r)])}}},j=n("Yr0d"),q=n("rVsN"),G=n.n(q),W=function(){String.prototype.gblen=function(){for(var e=0,t=0;t<this.length;t++)this.charCodeAt(t)>127||94==this.charCodeAt(t)?e+=2:e++;return e},r.a.use(O.a,$),r.a.use(E.c),r.a.use(E.b),r.a.component("auto-virtual-list",B),r.a.component("loadinganite",j.a),r.a.prototype.$BMap=function(){var e=document.createElement("div"),t=new BMap.Map(e),n=new BMap.Point(116.331398,39.897445);t.centerAndZoom(n,12);var r=new BMap.Geolocation;function i(){return new G.a(function(e,t){r.enableSDKLocation(),r.getCurrentPosition(function(t){if(this.getStatus()==BMAP_STATUS_SUCCESS){var n={lng:t.point.lng,lat:t.point.lat};a.a.commit("user/UPDATE_LOCATION",n),e(n)}else e(!1)})})}return i().then(function(e){e||console.log("获取地理位置失败"),console.log("获取地理位置成功",e),a.a.commit("user/UPDATE_LOCATION",e),a.a.commit("listHelper/updateList")}),{getPosition:i}}(),r.a.prototype.$utils=f.b,r.a.prototype.$apihelper=N,r.a.config.productionTip=!1,window.vueObj=new r.a({el:"#app",router:L,components:{App:l},store:a.a,template:"<App/>",beforeCreate:function(){var e=this;return u()(s.a.mark(function t(){var n,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=f.b.cookie.get("token"),r=f.b.cookie.get("userId"),n&&r?(a.a.dispatch("user/login_success",n),Object(F.a)()):e.$router.replace({path:"/login"});case 3:case"end":return t.stop()}},t,e)}))()}})},J=(n("nuyN"),n("ZLEe")),Y=n.n(J),Z={countFromat:function(e){return e<1e3?e:e>1e3?(e/1e3).toFixed(1)+"k":e>1e6?(e/1e6).toFixed(1)+"m":void 0},distanceFromat:function(e){return e<1e3?parseInt(e)+"米":Math.ceil(e/1e3)+"公里"}},K=n("iDdd");n.n(K).a.attach(document.body),D=r.a,Y()(Z).forEach(function(e){D.filter(e,Z[e])}),a.a.state.platform.isApicloud?window.apiready=(T=W,function(){r.a.prototype.$native={listenerKeyback:g,removeListenKeyback:y,exitApp:b,setPause:v,setResume:w},T()}):W()},Yr0d:function(e,t,n){"use strict";var r={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"loading-adminte"}},[t("div",{staticClass:"d"},[t("span",{staticClass:"s"})]),this._v(" "),t("div",{staticClass:"d"},[t("span",{staticClass:"s"})]),this._v(" "),t("div",{staticClass:"d"},[t("span",{staticClass:"s"})])])}]};var a=n("C7Lr")({},r,!1,function(e){n("M7pd")},"data-v-a59423f6",null);t.a=a.exports},YtJ0:function(e,t,n){"use strict";var r=n("83B7"),a=n("R4Sj"),i=n("lC5x"),s=n.n(i),o=n("J0Oq"),u=n.n(o),c=n("0xDb"),l={namespaced:!0,state:{islogin:!1,token:c.a.get("token"),userId:"",hasLatLng:!1,lat:"",lng:"",userInfo:{country:"中国",province:"广东",city:"深圳",userMail:"",userAvatar:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1551893841562&di=345411edc20bb9c87203881672904900&imgtype=0&src=http%3A%2F%2Fbpic.588ku.com%2Felement_origin_min_pic%2F01%2F31%2F87%2F96573b585a7c9c4.jpg",userName:"洪涛",gender:"0",addRess:""}},mutations:{LOGIN_SUCCESS:function(e,t){for(var n in e.islogin=!0,t)"id"===n&&(e.userId=t[n]),e.userInfo[n]=t[n]},UPDATE_USERDATA:function(e,t){for(var n in t)"id"===n&&(e.userId=t[n]),e.userInfo[n]=t[n]},UPDATE_LOCATION:function(e,t){e.lat=t.lat,e.lng=t.lng,e.hasLatLng=!0}},actions:{login_success:function(e,t){var n=this,r=e.commit;return u()(s.a.mark(function e(){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._vm.$apihelper.getUserInfo(t);case 2:a=e.sent,r("LOGIN_SUCCESS",a.d);case 4:case"end":return e.stop()}},e,n)}))()}}},p=n("HzJ8"),d=n.n(p),f=n("IHPB"),h=n.n(f),m=1;function g(e){e.shareImg?e.height="260px":e.height="150px",e.shareImg=e.shareImg.split(","),e.createTime=c.b.dateFromat(e.createTime),e.distance=c.b.getGreatCircleDistance(e.shareLat,e.shareLng),e.distance=window.vueObj.$options.filters.distanceFromat(e.distance)}var v={namespaced:!0,state:{pageSize:20,activeType:"newest",newest:{list:[],page:m,finished:!1},nearby:{list:[],page:m,finished:!1},dynamic:{list:[],page:m,finished:!1},replyMeList:{page:m,pageSize:20,finished:!1,list:[]},dianzanList:{page:m,pageSize:20,finished:!1,list:[]}},mutations:{setList:function(e,t){var n,r=t.type,a=t.isreload,i=t.list,s=!0,o=!1,u=void 0;try{for(var c,l=d()(i);!(s=(c=l.next()).done);s=!0){g(c.value)}}catch(e){o=!0,u=e}finally{try{!s&&l.return&&l.return()}finally{if(o)throw u}}a?(e[r].list=i,e[r].finished=!1,e[r].page=m):(n=e[r].list).push.apply(n,h()(i));e[r].page++,i.length<10&&(e[r].finished=!0)},Like:function(e,t){var n=t.index,r=t.type;e[r].list[n].parse=!0,e[r].list[n].shareLikeCount+=1},setList2:function(e,t){var n,r=t.isreload,a=t.list,i=t.name;r?(e[i].page=0,e[i].finished=!1,e[i].list=a):(e[i].page++,(n=e[i].list).push.apply(n,h()(a)));a.length<e[i].pageSize&&(e[i].finished=!0)},updateList:function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=d()(["nearby","dynamic","newest"]);!(t=(a=i.next()).done);t=!0){var s=a.value,o=!0,u=!1,l=void 0;try{for(var p,f=d()(e[s].list);!(o=(p=f.next()).done);o=!0){var h=p.value;h.distance=c.b.getGreatCircleDistance(h.shareLat,h.shareLng),h.distance=window.vueObj.$options.filters.distanceFromat(h.distance)}}catch(e){u=!0,l=e}finally{try{!o&&f.return&&f.return()}finally{if(u)throw l}}}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}},actions:{getlistHelper:function(e,t){var n=this,r=e.commit,a=e.state;return u()(s.a.mark(function e(){var i,o,u,c,l,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=t.isreload,o=t.type,u=t.cb,c=void 0,l=void 0,e.t0=o,e.next="newest"===e.t0?5:"nearby"===e.t0?8:"dynamic"===e.t0?11:14;break;case 5:return c=a.newest.page,l="2",e.abrupt("break",14);case 8:return c=a.nearby.page,l="1",e.abrupt("break",14);case 11:return c=a.dynamic.page,l="2",e.abrupt("break",14);case 14:return i&&(c=m),e.next=17,n._vm.$apihelper.getShearList({lng:n.state.user.lng+"",lat:n.state.user.lat+"",searchType:l,page:c+"",pageSize:a.pageSize+""});case 17:if(p=e.sent){e.next=20;break}return e.abrupt("return");case 20:r("setList",{type:o,isreload:i,list:p.d.shareList}),u&&u();case 22:case"end":return e.stop()}},e,n)}))()},replyMeList:function(e,t){var n=this,r=e.commit,a=e.state;return u()(s.a.mark(function e(){var i,o,u,c,l,p,f,h,m;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.isreload,o=t.cb,e.next=3,n._vm.$apihelper.getReplyMeList({page:a.replyMeList.page+"",pageSize:a.replyMeList.pageSize+""});case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return");case 6:for(c=!0,l=!1,p=void 0,e.prev=9,f=d()(u.d.replyList);!(c=(h=f.next()).done);c=!0)(m=h.value).comment.replies?m.child=!0:m.child=!1,m.share.shareImg=m.share.shareImg.split(","),m.comment.replyTime=n._vm.$utils.dateFromat(m.comment.replyTime),m.comment.replies?m.isChild=!0:m.isChild=!1;e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),l=!0,p=e.t0;case 17:e.prev=17,e.prev=18,!c&&f.return&&f.return();case 20:if(e.prev=20,!l){e.next=23;break}throw p;case 23:return e.finish(20);case 24:return e.finish(17);case 25:r("setList2",{isreload:i,list:u.d.replyList,name:"replyMeList"}),o&&o();case 27:case"end":return e.stop()}},e,n,[[9,13,17,25],[18,,20,24]])}))()},dianzanList:function(e,t){var n=this,r=e.commit,a=e.state;return u()(s.a.mark(function e(){var i,o,u,c,l,p,f,h,m;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.isreload,o=t.cb,e.next=3,n._vm.$apihelper.getLikeMeLogs({page:a.dianzanList.page+"",pageSize:a.dianzanList.pageSize+""});case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return",o&&o(!1));case 6:for(c=!0,l=!1,p=void 0,e.prev=9,f=d()(u.d.parseList);!(c=(h=f.next()).done);c=!0)(m=h.value).comment?m.isComment=!0:m.isComment=!1;e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),l=!0,p=e.t0;case 17:e.prev=17,e.prev=18,!c&&f.return&&f.return();case 20:if(e.prev=20,!l){e.next=23;break}throw p;case 23:return e.finish(20);case 24:return e.finish(17);case 25:r("setList2",{isreload:i,list:u.d.parseList,name:"dianzanList"}),o&&o();case 27:case"end":return e.stop()}},e,n,[[9,13,17,25],[18,,20,24]])}))()}}};r.a.use(a.a);t.a=new a.a.Store({state:{ajaxUrl:"http://www.wuxfly.com:2019",routerPathC:[],curRoutePath:"/",platform:{isApicloud:navigator.userAgent.toLowerCase().includes("apicloud"),isWx:navigator.userAgent.toLowerCase().includes("micromessenger"),isIos:navigator.userAgent.match(/(iPhone|iPod|iPad);?/i),isAndroid:navigator.userAgent.match(/android/i),isWeb:!navigator.userAgent.toLowerCase().includes("micromessenger")&&!navigator.userAgent.toLowerCase().includes("apicloud")}},mutations:{setRouterCache:function(e,t){var n=t.isback,r=t.val;n?e.routerPathC.pop():e.routerPathC.push(r)},setRoutePath:function(e,t){e.curRoutePath=t}},getters:{},actions:{},modules:{user:l,listHelper:v}})},"q+kZ":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.803468d389469699afe1.js.map