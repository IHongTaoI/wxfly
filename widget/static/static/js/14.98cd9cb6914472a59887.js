webpackJsonp([14],{DVwZ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("lC5x"),n=s.n(r),a=s("J0Oq"),i=s.n(a),o={data:function(){return{email:"",password:"",sms:"",smsCount:0,timer:null}},methods:{sendSms:function(){var e=this;return i()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$apihelper.getMailSms({userName:"测试用户",userMail:e.email});case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:if(0===e.smsCount){t.next=7;break}return t.abrupt("return");case 7:e.smsCount=60,e.timer=setInterval(function(){if(e.smsCount<=0)return e.smsCount=0,void clearInterval(e.timer);e.smsCount--},1e3);case 9:case"end":return t.stop()}},t,e)}))()},register:function(){var e=this;return i()(n.a.mark(function t(){var s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$apihelper.mailRegister({mail:e.email,nickName:"",password:e.password,code:e.sms,registType:"N"});case 2:if(s=t.sent){t.next=5;break}return t.abrupt("return");case 5:e.$utils.cookie.delete("token"),e.$utils.cookie.set("token",s.h.token,1),e.$store.dispatch("user/login_success",s.h.token),e.$router.replace({path:"/home"});case 9:case"end":return t.stop()}},t,e)}))()}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"login"}},[e._m(0),e._v(" "),s("div",{staticClass:"from"},[s("van-cell-group",[s("van-field",{attrs:{required:"",clearable:"",label:"邮箱","right-icon":"question-o",placeholder:"请输入邮箱"},on:{"click-right-icon":function(t){return e.$toast("question")}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),s("van-field",{attrs:{type:"password",label:"密码",placeholder:"请输入密码",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),s("van-field",{attrs:{center:"",clearable:"",label:"验证码",placeholder:"请输入邮箱验证码"},model:{value:e.sms,callback:function(t){e.sms=t},expression:"sms"}},[s("van-button",{attrs:{slot:"button",size:"small",type:"primary"},on:{click:e.sendSms},slot:"button"},[e._v(e._s(e.smsCount?e.smsCount+"秒":"发送验证码"))])],1)],1)],1),e._v(" "),s("div",{staticClass:"btn"},[s("van-button",{staticClass:"btnvant",attrs:{type:"warning"},on:{click:e.register}},[e._v("注册")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("img",{staticClass:"login",attrs:{src:s("j59A")}})])}]};var c=s("C7Lr")(o,l,!1,function(e){s("x76I")},"data-v-4d15c36b",null);t.default=c.exports},x76I:function(e,t){}});
//# sourceMappingURL=14.98cd9cb6914472a59887.js.map